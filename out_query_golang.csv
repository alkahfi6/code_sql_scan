AppName,RelPath,File,SourceCategory,SourceKind,LineStart,LineEnd,Func,RawSql,SqlClean,UsageKind,IsWrite,HasCrossDb,DbList,ObjectCount,IsDynamic,ConnName,ConnDb,QueryHash,RiskLevel,DefinedInRelPath,DefinedInLine
golang-sample,go1/destination.go,destination.go,code,go,15,15,UpdateControlTableResikoPasar,"EXEC [dbo].[UpdateControlTableResikoPasar] ?,?","EXEC [dbo].[UpdateControlTableResikoPasar] ?,?",EXEC,true,false,,2,false,db,,bf6f164aa3e86951b93fd0b17ebc8dbff98ebd0b,MEDIUM,go1/golang/go1/sp.go,3
golang-sample,go1/destination.go,destination.go,code,go,25,25,GetOboxPreviousWorkingDate,select * from OBOXGetPrevDate_v,select * from OBOXGetPrevDate_v,SELECT,false,false,,1,false,db,,2b670ce0899d69a442ab570b63ab71cd8d786174,LOW,go1/golang/go1/query.go,3
golang-sample,go1/destination.go,destination.go,code,go,41,41,DeleteDuplicateConfo,<dynamic-sql>,<dynamic-sql>,UNKNOWN,false,false,,0,true,db,,829e30d2ed137a41defc3a465e6c3746bc753ccf,LOW,go1/destination.go,0
golang-sample,go1/destination.go,destination.go,code,go,58,58,ExecuteSPMurexTConfo,<dynamic-sql>,<dynamic-sql>,UNKNOWN,false,false,,0,true,db,,829e30d2ed137a41defc3a465e6c3746bc753ccf,LOW,go1/destination.go,0
golang-sample,go1/destination.go,destination.go,code,go,68,68,GetNamaSSB,"
declare @dtToday varchar(8)
set @dtToday = convert(varchar(8), getdate(), 112)
select
isnull(CAST(
 STUFF((SELECT DISTINCT ',' + ('''' + CAST(NamaSSB AS VARCHAR(500)) + '''')
 FROM mk006_a
   WHERE convert(varchar(8), ProcessDate, 112) = @dtToday
   GROUP BY NamaSSB
   FOR XML PATH (''))
   , 1, 1, '') AS VARCHAR(8000)), '''''')  AS secid
","declare @dtToday varchar(8)
set @dtToday = convert(varchar(8), getdate(), 112)
select
isnull(CAST(
 STUFF((SELECT DISTINCT ',' + ('''' + CAST(NamaSSB AS VARCHAR(500)) + '''')
 FROM mk006_a
   WHERE convert(varchar(8), ProcessDate, 112) = @dtToday
   GROUP BY NamaSSB
   FOR XML PATH (''))
   , 1, 1, '') AS VARCHAR(8000)), '''''')  AS secid",SELECT,false,false,,1,false,db,,5d86ef43abc26b943749f6859c9f9a67e7b3d938,LOW,go1/golang/go1/query.go,137
golang-sample,go1/destination.go,destination.go,code,go,78,78,DeleteAvgPrice,"
declare @dtToday varchar(8)
set @dtToday = convert(varchar(8),  getdate(), 112)
delete mk006_a_actuate
where convert(varchar(8), ProcessDate, 112) = @dtToday
","declare @dtToday varchar(8)
set @dtToday = convert(varchar(8),  getdate(), 112)
delete mk006_a_actuate
where convert(varchar(8), ProcessDate, 112) = @dtToday",DELETE,true,false,,1,false,db,,ddae4ff638f42a0c77ee8b075c20298c26048350,MEDIUM,go1/golang/go1/query.go,150
golang-sample,go1/destination.go,destination.go,code,go,94,94,UpdateTableMK,EXEC [[dynamic-proc]],EXEC [[dynamic-proc]],EXEC,true,false,,1,true,db,,651c5bb288d62e8ad7b7fccb0467d154c0767ee3,HIGH,go1/destination.go,0
golang-sample,go1/destination.go,destination.go,code,go,115,115,ExecSPMK,EXEC [[dynamic-proc]],EXEC [[dynamic-proc]],EXEC,true,false,,1,true,db,,651c5bb288d62e8ad7b7fccb0467d154c0767ee3,HIGH,go1/destination.go,0
golang-sample,go1/destination.go,destination.go,code,go,129,129,GetFlatFileData,EXEC [[dynamic-proc]],EXEC [[dynamic-proc]],EXEC,true,false,,1,true,db,,651c5bb288d62e8ad7b7fccb0467d154c0767ee3,HIGH,go1/destination.go,0
golang-sample,go1/destination.go,destination.go,code,go,137,137,GetFlatFileData,EXEC [[dynamic-proc]],EXEC [[dynamic-proc]],EXEC,true,false,,1,true,db,,651c5bb288d62e8ad7b7fccb0467d154c0767ee3,HIGH,go1/destination.go,0
golang-sample,go1/destination.go,destination.go,code,go,151,151,GetFlatFileData,EXEC [[dynamic-proc]],EXEC [[dynamic-proc]],EXEC,true,false,,1,true,db,,651c5bb288d62e8ad7b7fccb0467d154c0767ee3,HIGH,go1/destination.go,0
golang-sample,go1/destination.go,destination.go,code,go,179,179,GetFlatFileUnstructuredData,EXEC [[dynamic-proc]],EXEC [[dynamic-proc]],EXEC,true,false,,1,true,db,,651c5bb288d62e8ad7b7fccb0467d154c0767ee3,HIGH,go1/destination.go,0
golang-sample,go1/destination.go,destination.go,code,go,191,191,GetTableRetry,select process_type from dbo.control_table_resiko_pasar where success_bit = 0 ,select process_type from dbo.control_table_resiko_pasar where success_bit = 0,SELECT,false,false,,1,false,db,,71a7af3e8ce7fd6589c0bf8df83982f2d4c694f4,LOW,go1/destination.go,190
golang-sample,go1/destination.go,destination.go,code,go,208,208,DeleteDuplicateDataMK,<dynamic-sql>,<dynamic-sql>,UNKNOWN,false,false,,0,true,db,,829e30d2ed137a41defc3a465e6c3746bc753ccf,LOW,go1/destination.go,0
golang-sample,go1/query.go,query.go,code,go,3,3,,select * from OBOXGetPrevDate_v,select * from OBOXGetPrevDate_v,SELECT,false,false,,1,false,,,2b670ce0899d69a442ab570b63ab71cd8d786174,LOW,go1/query.go,3
golang-sample,go1/query.go,query.go,code,go,5,5,,"DELETE FROM confomk005_a 
WHERE convert(varchar(8), ProcessDate, 112) >= convert(varchar(8), getdate(), 112)","DELETE FROM confomk005_a 
WHERE convert(varchar(8), ProcessDate, 112) >= convert(varchar(8), getdate(), 112)",DELETE,true,false,,2,false,,,04045bf8ecb0bab0e865d4b28e0b6af8411a7b60,MEDIUM,go1/query.go,5
golang-sample,go1/query.go,query.go,code,go,7,7,,"DELETE FROM confomk006_a 
WHERE convert(varchar(8), ProcessDate, 112) >= convert(varchar(8), getdate(), 112)","DELETE FROM confomk006_a 
WHERE convert(varchar(8), ProcessDate, 112) >= convert(varchar(8), getdate(), 112)",DELETE,true,false,,2,false,,,20f7ae043f59da4d3a7c4e67b50df022253776ba,MEDIUM,go1/query.go,7
golang-sample,go1/query.go,query.go,code,go,10,10,,"
select CFN1,CA1
,CA2,CA3,CA4,DEALNO,PS_1
,SECID,ISSUER,DEALDATE,SETTDATE
,IPAYDATE,MDATE,COUPRATE_8,CCY
,QTY,PRICE_8,YIELD_8,COSTAMT
,PURCHINTAMT,BROKFEECCY,VATAMT
,WHTAMT,SETTCCY,SETTAMT,C1_1
,C2_1,ST1,ST2,ST3,ST4,C1_2,C2_2
,BIC,SD,DESCR,BROKFEEAMT
,M_BANK,CONTRACT,X_M_NB
    from [[schema]].mk006a_confo ","select CFN1,CA1
,CA2,CA3,CA4,DEALNO,PS_1
,SECID,ISSUER,DEALDATE,SETTDATE
,IPAYDATE,MDATE,COUPRATE_8,CCY
,QTY,PRICE_8,YIELD_8,COSTAMT
,PURCHINTAMT,BROKFEECCY,VATAMT
,WHTAMT,SETTCCY,SETTAMT,C1_1
,C2_1,ST1,ST2,ST3,ST4,C1_2,C2_2
,BIC,SD,DESCR,BROKFEEAMT
,M_BANK,CONTRACT,X_M_NB
    from [[schema]].mk006a_confo",SELECT,false,false,,1,true,,,8717d331471ce71d63d2557ed7c6eb41d1738832,LOW,go1/query.go,10
golang-sample,go1/query.go,query.go,code,go,22,22,,"
SELECT CFN1,CA1,CA2,CA3,CA4
,DEALNO,PS_1,SECID,DESCR,ISSUER
,DEALDATE,SETTDATE,IPAYDATE,MDATE,COUPRATE_8
,CCY,QTY,PRICE_8,YIELD_8,COSTAMT
,PURCHINTAMT,BROKFEECCY,BROKFEEAMT,VATAMT,WHTAMT
,SETTCCY,SETTAMT,C1_1,C2_1,ST1
,ST2,ST3,ST4,C1_2,C2_2
,BIC,SD,M_BANK,CONTRACT,X_M_NB 
FROM [[schema]].MK005A_CONFO","SELECT CFN1,CA1,CA2,CA3,CA4
,DEALNO,PS_1,SECID,DESCR,ISSUER
,DEALDATE,SETTDATE,IPAYDATE,MDATE,COUPRATE_8
,CCY,QTY,PRICE_8,YIELD_8,COSTAMT
,PURCHINTAMT,BROKFEECCY,BROKFEEAMT,VATAMT,WHTAMT
,SETTCCY,SETTAMT,C1_1,C2_1,ST1
,ST2,ST3,ST4,C1_2,C2_2
,BIC,SD,M_BANK,CONTRACT,X_M_NB 
FROM [[schema]].MK005A_CONFO",SELECT,false,false,,1,true,,,20aee50cc7753e486e9e1768204f61789b0c97da,LOW,go1/query.go,22
golang-sample,go1/query.go,query.go,code,go,33,33,,"
INSERT INTO SQL_REPLICATE.dbo.confomk006_a (
CFN1,CA1,CA2,CA3,CA4,
DEALNO,PS_1,SECID,ISSUER,DEALDATE,
SETTDATE,IPAYDATE,MDATE,COUPRATE_8,CCY
,QTY,PRICE_8,YIELD_8,COSTAMT,PURCHINTAMT,
BROKFEECCY,VATAMT,WHTAMT,SETTCCY,SETTAMT,
C1_1,C2_1,ST1,ST2,ST3,
ST4,C1_2,C2_2,BIC,SD,
ProcessDate,DESCR,BROKFEEAMT,M_BANK,CONTRACT,
X_M_NB )
values (:CFN1,:CA1,:CA2,:CA3,:CA4,
:DEALNO,:PS_1,:SECID,:ISSUER,:DEALDATE,
:SETTDATE,:IPAYDATE,:MDATE,:COUPRATE_8,:CCY
,:QTY,:PRICE_8,:YIELD_8,:COSTAMT,:PURCHINTAMT,
:BROKFEECCY,:VATAMT,:WHTAMT,:SETTCCY,:SETTAMT,
:C1_1,:C2_1,:ST1,:ST2,:ST3,
:ST4,:C1_2,:C2_2,:BIC,:SD,
:ProcessDate,:DESCR,:BROKFEEAMT,:M_BANK,:CONTRACT,
:X_M_NB )
","INSERT INTO SQL_REPLICATE.dbo.confomk006_a (
CFN1,CA1,CA2,CA3,CA4,
DEALNO,PS_1,SECID,ISSUER,DEALDATE,
SETTDATE,IPAYDATE,MDATE,COUPRATE_8,CCY
,QTY,PRICE_8,YIELD_8,COSTAMT,PURCHINTAMT,
BROKFEECCY,VATAMT,WHTAMT,SETTCCY,SETTAMT,
C1_1,C2_1,ST1,ST2,ST3,
ST4,C1_2,C2_2,BIC,SD,
ProcessDate,DESCR,BROKFEEAMT,M_BANK,CONTRACT,
X_M_NB )
values (:CFN1,:CA1,:CA2,:CA3,:CA4,
:DEALNO,:PS_1,:SECID,:ISSUER,:DEALDATE,
:SETTDATE,:IPAYDATE,:MDATE,:COUPRATE_8,:CCY
,:QTY,:PRICE_8,:YIELD_8,:COSTAMT,:PURCHINTAMT,
:BROKFEECCY,:VATAMT,:WHTAMT,:SETTCCY,:SETTAMT,
:C1_1,:C2_1,:ST1,:ST2,:ST3,
:ST4,:C1_2,:C2_2,:BIC,:SD,
:ProcessDate,:DESCR,:BROKFEEAMT,:M_BANK,:CONTRACT,
:X_M_NB )",INSERT,true,true,SQL_REPLICATE,1,false,,,eca0709c5951a280ef456c73127c6c2c93c9ee70,HIGH,go1/query.go,33
golang-sample,go1/query.go,query.go,code,go,55,55,,"
INSERT INTO SQL_REPLICATE.dbo.confomk005_a (
CFN1,CA1,CA2,CA3,CA4,
DEALNO,PS_1,SECID,ISSUER,DEALDATE,
SETTDATE,IPAYDATE,MDATE,COUPRATE_8,CCY
,QTY,PRICE_8,YIELD_8,COSTAMT,PURCHINTAMT,
BROKFEECCY,VATAMT,WHTAMT,SETTCCY,SETTAMT,
C1_1,C2_1,ST1,ST2,ST3,
ST4,C1_2,C2_2,BIC,SD,
ProcessDate,DESCR,BROKFEEAMT,M_BANK,CONTRACT,
X_M_NB )
values (:CFN1,:CA1,:CA2,:CA3,:CA4,
:DEALNO,:PS_1,:SECID,:ISSUER,:DEALDATE,
:SETTDATE,:IPAYDATE,:MDATE,:COUPRATE_8,:CCY
,:QTY,:PRICE_8,:YIELD_8,:COSTAMT,:PURCHINTAMT,
:BROKFEECCY,:VATAMT,:WHTAMT,:SETTCCY,:SETTAMT,
:C1_1,:C2_1,:ST1,:ST2,:ST3,
:ST4,:C1_2,:C2_2,:BIC,:SD,
:ProcessDate,:DESCR,:BROKFEEAMT,:M_BANK,:CONTRACT,
:X_M_NB )
","INSERT INTO SQL_REPLICATE.dbo.confomk005_a (
CFN1,CA1,CA2,CA3,CA4,
DEALNO,PS_1,SECID,ISSUER,DEALDATE,
SETTDATE,IPAYDATE,MDATE,COUPRATE_8,CCY
,QTY,PRICE_8,YIELD_8,COSTAMT,PURCHINTAMT,
BROKFEECCY,VATAMT,WHTAMT,SETTCCY,SETTAMT,
C1_1,C2_1,ST1,ST2,ST3,
ST4,C1_2,C2_2,BIC,SD,
ProcessDate,DESCR,BROKFEEAMT,M_BANK,CONTRACT,
X_M_NB )
values (:CFN1,:CA1,:CA2,:CA3,:CA4,
:DEALNO,:PS_1,:SECID,:ISSUER,:DEALDATE,
:SETTDATE,:IPAYDATE,:MDATE,:COUPRATE_8,:CCY
,:QTY,:PRICE_8,:YIELD_8,:COSTAMT,:PURCHINTAMT,
:BROKFEECCY,:VATAMT,:WHTAMT,:SETTCCY,:SETTAMT,
:C1_1,:C2_1,:ST1,:ST2,:ST3,
:ST4,:C1_2,:C2_2,:BIC,:SD,
:ProcessDate,:DESCR,:BROKFEEAMT,:M_BANK,:CONTRACT,
:X_M_NB )",INSERT,true,true,SQL_REPLICATE,1,false,,,7713fe8dae13c3944cf3992d190884b460d97a84,HIGH,go1/query.go,55
golang-sample,go1/query.go,query.go,code,go,77,77,,"delete from mk005_a 
where convert(varchar(8),ProcessDate, 112) = convert(varchar(8),getdate(), 112)","delete from mk005_a 
where convert(varchar(8),ProcessDate, 112) = convert(varchar(8),getdate(), 112)",DELETE,true,false,,2,false,,,879f4afcb1006b1bc7e8bbee8048307332323261,MEDIUM,go1/query.go,77
golang-sample,go1/query.go,query.go,code,go,79,79,,"delete from mk006_a 
where convert(varchar(8),ProcessDate, 112) = convert(varchar(8),getdate(), 112)","delete from mk006_a 
where convert(varchar(8),ProcessDate, 112) = convert(varchar(8),getdate(), 112)",DELETE,true,false,,2,false,,,35ac35ba5b29092d6277439b95af20442af92717,MEDIUM,go1/query.go,79
golang-sample,go1/query.go,query.go,code,go,82,82,,"
select DEALNO,BRANCHTRANSACTION  ,BRANCHCOMPLETION
,USERCOMPLETION ,STATUSDOKUMEN ,TRANSACTIONDATE
,FLAGDETAIL,KODEISIN,NAMASSB
,KATEGORIPENGUKURAN,NOMINAL,TANGGALPEMBELIAN
,JUMLAHPEMBELIAN,NAMAPEMBELI,GOLONGANPEMBELI
,MATAUANG,CIFNO,JUMLAHPENJUALAN
,CONTRACT,X_M_NB FROM [[schema]].MK006_A","select DEALNO,BRANCHTRANSACTION  ,BRANCHCOMPLETION
,USERCOMPLETION ,STATUSDOKUMEN ,TRANSACTIONDATE
,FLAGDETAIL,KODEISIN,NAMASSB
,KATEGORIPENGUKURAN,NOMINAL,TANGGALPEMBELIAN
,JUMLAHPEMBELIAN,NAMAPEMBELI,GOLONGANPEMBELI
,MATAUANG,CIFNO,JUMLAHPENJUALAN
,CONTRACT,X_M_NB FROM [[schema]].MK006_A",SELECT,false,false,,1,true,,,3066fe98cfba745aaa8d218d4d9709683503959a,LOW,go1/query.go,82
golang-sample,go1/query.go,query.go,code,go,91,91,,"
select DEALNO ,BRANCHTRANSACTION ,BRANCHCOMPLETION
,USERCOMPLETION ,STATUSDOKUMEN ,TRANSACTIONDATE
,FLAGDETAIL ,KODEISIN ,NAMASSB
,JENISSSB ,KATEGORIPENGUKURAN ,NOMINAL
,GOLONGANPIHAKLAWAN  ,GOLONGANPENERBIT ,PERINGKATPENERBITSSB
,LEMBAGAPEMERINGKAT    ,MATAUANG ,SUKUBUNGA
,DURASI   ,TANGGALJATUHTEMPO     ,JENISBUNGA
,CIFNO    ,JUMLAH   ,NAMAPENJUAL
,CONTRACT ,X_M_NB
FROM [[schema]].MK005_A","select DEALNO ,BRANCHTRANSACTION ,BRANCHCOMPLETION
,USERCOMPLETION ,STATUSDOKUMEN ,TRANSACTIONDATE
,FLAGDETAIL ,KODEISIN ,NAMASSB
,JENISSSB ,KATEGORIPENGUKURAN ,NOMINAL
,GOLONGANPIHAKLAWAN  ,GOLONGANPENERBIT ,PERINGKATPENERBITSSB
,LEMBAGAPEMERINGKAT    ,MATAUANG ,SUKUBUNGA
,DURASI   ,TANGGALJATUHTEMPO     ,JENISBUNGA
,CIFNO    ,JUMLAH   ,NAMAPENJUAL
,CONTRACT ,X_M_NB
FROM [[schema]].MK005_A",SELECT,false,false,,1,true,,,e5a6b58c40aeee2a5c37a31a98841e0121ff0621,LOW,go1/query.go,91
golang-sample,go1/query.go,query.go,code,go,103,103,,"
INSERT INTO SQL_REPLICATE.dbo.mk006_a (
DealNo,BranchTransaction,BranchCompletion
,UserCompletion,StatusDokumen,TransactionDate
,ProcessDate,FlagDetail,KodeISIN
,NamaSSB,KategoriPengukuran,Nominal
,TanggalPembelian,JumlahPembelian,JumlahPenjualan
,NamaPembeli,GolonganPembeli
,MataUang,CIFNo,CONTRACT,X_M_NB)
VALUES (:DealNo,:BranchTransaction,:BranchCompletion
,:UserCompletion,:StatusDokumen,:TransactionDate
,:ProcessDate,:FlagDetail,:KodeISIN
,:NamaSSB,:KategoriPengukuran,:Nominal
,:TanggalPembelian,:JumlahPembelian,:JumlahPenjualan
,:NamaPembeli,:GolonganPembeli
,:MataUang,:CIFNo,:CONTRACT,:X_M_NB)
","INSERT INTO SQL_REPLICATE.dbo.mk006_a (
DealNo,BranchTransaction,BranchCompletion
,UserCompletion,StatusDokumen,TransactionDate
,ProcessDate,FlagDetail,KodeISIN
,NamaSSB,KategoriPengukuran,Nominal
,TanggalPembelian,JumlahPembelian,JumlahPenjualan
,NamaPembeli,GolonganPembeli
,MataUang,CIFNo,CONTRACT,X_M_NB)
VALUES (:DealNo,:BranchTransaction,:BranchCompletion
,:UserCompletion,:StatusDokumen,:TransactionDate
,:ProcessDate,:FlagDetail,:KodeISIN
,:NamaSSB,:KategoriPengukuran,:Nominal
,:TanggalPembelian,:JumlahPembelian,:JumlahPenjualan
,:NamaPembeli,:GolonganPembeli
,:MataUang,:CIFNo,:CONTRACT,:X_M_NB)",INSERT,true,true,SQL_REPLICATE,1,false,,,a7bca9c05ae05d6d814d465ee4ca93275d591394,HIGH,go1/query.go,103
golang-sample,go1/query.go,query.go,code,go,121,121,,"
INSERT INTO SQL_REPLICATE.dbo.mk005_a (
DealNo,BranchTransaction,BranchCompletion,UserCompletion,StatusDokumen
,TransactionDate,ProcessDate,FlagDetail,KodeISIN,NamaSSB
,JenisSSB,KategoriPengukuran,Nominal,Jumlah,GolonganPihakLawan
,GolonganPenerbit,PeringkatPenerbitSSB,LembagaPemeringkat,MataUang,SukuBunga
,Durasi,TanggalJatuhTempo,JenisBunga,CIFNo,NamaPenjual
,CONTRACT,X_M_NB)
VALUES (:DealNo,:BranchTransaction,:BranchCompletion,:UserCompletion,:StatusDokumen
,:TransactionDate,:ProcessDate,:FlagDetail,:KodeISIN,:NamaSSB
,:JenisSSB,:KategoriPengukuran,:Nominal,:Jumlah,:GolonganPihakLawan
,:GolonganPenerbit,:PeringkatPenerbitSSB,:LembagaPemeringkat,:MataUang,:SukuBunga
,:Durasi,:TanggalJatuhTempo,:JenisBunga,:CIFNo,:NamaPenjual
,:CONTRACT,:X_M_NB)
","INSERT INTO SQL_REPLICATE.dbo.mk005_a (
DealNo,BranchTransaction,BranchCompletion,UserCompletion,StatusDokumen
,TransactionDate,ProcessDate,FlagDetail,KodeISIN,NamaSSB
,JenisSSB,KategoriPengukuran,Nominal,Jumlah,GolonganPihakLawan
,GolonganPenerbit,PeringkatPenerbitSSB,LembagaPemeringkat,MataUang,SukuBunga
,Durasi,TanggalJatuhTempo,JenisBunga,CIFNo,NamaPenjual
,CONTRACT,X_M_NB)
VALUES (:DealNo,:BranchTransaction,:BranchCompletion,:UserCompletion,:StatusDokumen
,:TransactionDate,:ProcessDate,:FlagDetail,:KodeISIN,:NamaSSB
,:JenisSSB,:KategoriPengukuran,:Nominal,:Jumlah,:GolonganPihakLawan
,:GolonganPenerbit,:PeringkatPenerbitSSB,:LembagaPemeringkat,:MataUang,:SukuBunga
,:Durasi,:TanggalJatuhTempo,:JenisBunga,:CIFNo,:NamaPenjual
,:CONTRACT,:X_M_NB)",INSERT,true,true,SQL_REPLICATE,1,false,,,51bb213368e285f6c4754eb9840303ff1b341598,HIGH,go1/query.go,121
golang-sample,go1/query.go,query.go,code,go,137,137,,"
declare @dtToday varchar(8)
set @dtToday = convert(varchar(8), getdate(), 112)
select
isnull(CAST(
 STUFF((SELECT DISTINCT ',' + ('''' + CAST(NamaSSB AS VARCHAR(500)) + '''')
 FROM mk006_a
   WHERE convert(varchar(8), ProcessDate, 112) = @dtToday
   GROUP BY NamaSSB
   FOR XML PATH (''))
   , 1, 1, '') AS VARCHAR(8000)), '''''')  AS secid
","declare @dtToday varchar(8)
set @dtToday = convert(varchar(8), getdate(), 112)
select
isnull(CAST(
 STUFF((SELECT DISTINCT ',' + ('''' + CAST(NamaSSB AS VARCHAR(500)) + '''')
 FROM mk006_a
   WHERE convert(varchar(8), ProcessDate, 112) = @dtToday
   GROUP BY NamaSSB
   FOR XML PATH (''))
   , 1, 1, '') AS VARCHAR(8000)), '''''')  AS secid",SELECT,false,false,,1,false,,,5d86ef43abc26b943749f6859c9f9a67e7b3d938,LOW,go1/query.go,137
golang-sample,go1/query.go,query.go,code,go,150,150,,"
declare @dtToday varchar(8)
set @dtToday = convert(varchar(8),  getdate(), 112)
delete mk006_a_actuate
where convert(varchar(8), ProcessDate, 112) = @dtToday
","declare @dtToday varchar(8)
set @dtToday = convert(varchar(8),  getdate(), 112)
delete mk006_a_actuate
where convert(varchar(8), ProcessDate, 112) = @dtToday",DELETE,true,false,,1,false,,,ddae4ff638f42a0c77ee8b075c20298c26048350,MEDIUM,go1/query.go,150
golang-sample,go1/query.go,query.go,code,go,157,157,,"
SELECT TRIM(SECID) as SECID, ABS(ROUND(SUM(BOOK_VALUE)/SUM(TDPRINTAMT), 17)) AS AVGPRICE
FROM [[schema]].BOND_JOURNAL a
where TRIM(SECID) IN ([[param]])
and TDPRINTAMT > 0
group by SECID
UNION
select TRIM(SECID) as SECID, ABS(ROUND(AVG(PRICE), 17)) AS AVGPRICE
from [[schema]].BOND_DETAIL where trim(SECID) not in (
select distinct trim(SECID) from [[schema]].BOND_JOURNAL where TDPRINTAMT > 0
)
and TRIM(SECID) IN ([[param]])
group by SECID
","SELECT TRIM(SECID) as SECID, ABS(ROUND(SUM(BOOK_VALUE)/SUM(TDPRINTAMT), 17)) AS AVGPRICE
FROM [[schema]].BOND_JOURNAL a
where TRIM(SECID) IN ([[param]])
and TDPRINTAMT > 0
group by SECID
UNION
select TRIM(SECID) as SECID, ABS(ROUND(AVG(PRICE), 17)) AS AVGPRICE
from [[schema]].BOND_DETAIL where trim(SECID) not in (
select distinct trim(SECID) from [[schema]].BOND_JOURNAL where TDPRINTAMT > 0
)
and TRIM(SECID) IN ([[param]])
group by SECID",SELECT,false,false,,1,true,,,58b836ac3e25feb6f7f2ff92f82b638a00effcfc,LOW,go1/query.go,157
golang-sample,go1/query.go,query.go,code,go,171,171,,"
INSERT INTO [dbo].[mk006_a_actuate] (secid,avg_price,ProcessDate)
SELECT ?,?,?
","INSERT INTO [dbo].[mk006_a_actuate] (secid,avg_price,ProcessDate)
SELECT ?,?,?",INSERT,true,false,,1,false,,,0f9eed78afc29b9ce10155287fe99a42e438fcaa,MEDIUM,go1/query.go,171
golang-sample,go1/source.go,source.go,code,go,24,24,ExecSPMurexMK,<dynamic-sql>,<dynamic-sql>,UNKNOWN,false,false,,0,true,db,,829e30d2ed137a41defc3a465e6c3746bc753ccf,LOW,go1/source.go,0
golang-sample,go1/source.go,source.go,code,go,41,41,ExecuteSPMurexConfoMK,<dynamic-sql>,<dynamic-sql>,UNKNOWN,false,false,,0,true,db,,829e30d2ed137a41defc3a465e6c3746bc753ccf,LOW,go1/source.go,0
golang-sample,go1/source.go,source.go,code,go,51,51,GetMK006AConfo,<dynamic-sql>,<dynamic-sql>,UNKNOWN,false,false,,0,true,db,,829e30d2ed137a41defc3a465e6c3746bc753ccf,LOW,go1/source.go,0
golang-sample,go1/source.go,source.go,code,go,61,61,GetMK006A,<dynamic-sql>,<dynamic-sql>,UNKNOWN,false,false,,0,true,db,,829e30d2ed137a41defc3a465e6c3746bc753ccf,LOW,go1/source.go,0
golang-sample,go1/source.go,source.go,code,go,71,71,GetMurexAvgPrice,<dynamic-sql>,<dynamic-sql>,UNKNOWN,false,false,,0,true,db,,829e30d2ed137a41defc3a465e6c3746bc753ccf,LOW,go1/source.go,0
golang-sample,go1/source.go,source.go,code,go,82,82,GetMK005AConfo,<dynamic-sql>,<dynamic-sql>,UNKNOWN,false,false,,0,true,db,,829e30d2ed137a41defc3a465e6c3746bc753ccf,LOW,go1/source.go,0
golang-sample,go1/source.go,source.go,code,go,93,93,GetMK005A,<dynamic-sql>,<dynamic-sql>,UNKNOWN,false,false,,0,true,db,,829e30d2ed137a41defc3a465e6c3746bc753ccf,LOW,go1/source.go,0
golang-sample,go1/source.go,source.go,code,go,112,112,ValidateMKData,EXEC [dbo].[MKValidateData] ?,EXEC [dbo].[MKValidateData] ?,EXEC,true,false,,1,false,db,,28f859d7ab79d670095b53ceb14234b366581493,MEDIUM,go1/source.go,104
golang-sample,go2/impl.go,impl.go,code,go,26,26,GetCurrWorkingDate,"
	SELECT TOP 1 current_working_date
	FROM dbo.control_table
","SELECT TOP 1 current_working_date
	FROM dbo.control_table",SELECT,false,false,,1,false,s.db.ConnRead,,5e2e34e6c7b66a6e103a624e2b7e66e772c61c4e,LOW,go2/golang/go2/query.go,3
golang-sample,go2/impl.go,impl.go,code,go,30,30,GetCFCOUN,"
	SELECT DISTINCT TRIM(CFCOUN)
	FROM dbo.CFMAST
	WHERE (CFCIF = ?)
","SELECT DISTINCT TRIM(CFCOUN)
	FROM dbo.CFMAST
	WHERE (CFCIF = ?)",SELECT,false,false,,1,false,s.db.ConnRead,,a9228bfc4e196770dce2c08013cd672b99697836,LOW,go2/golang/go2/query.go,8
golang-sample,go2/impl.go,impl.go,code,go,34,34,GetBIRates,"
	SELECT CurrencyCode, BIRate
	FROM dbo.SIBSCurrencyTable_TM
	WHERE (PBOId = 500)
","SELECT CurrencyCode, BIRate
	FROM dbo.SIBSCurrencyTable_TM
	WHERE (PBOId = 500)",SELECT,false,false,,1,false,s.db.ConnRead,,4c3e21fd67aec85e9073cc9adcf7b2154bed6d74,LOW,go2/golang/go2/query.go,14
golang-sample,go2/impl.go,impl.go,code,go,52,52,GetValasMappingParameter,"
		SELECT currency, buy_sell_code, product,
		product_category, transaction_limit_flag, transaction_limit_amount,
		monthly_limit_flag, monthly_limit_amount, lcs_flag, rate_currency,
		negara_mitra
		FROM dbo.valas_mapping_parameter
		WHERE  lcs_flag = 1
		AND transaction_limit_flag = 1
	","SELECT currency, buy_sell_code, product,
		product_category, transaction_limit_flag, transaction_limit_amount,
		monthly_limit_flag, monthly_limit_amount, lcs_flag, rate_currency,
		negara_mitra
		FROM dbo.valas_mapping_parameter
		WHERE  lcs_flag = 1
		AND transaction_limit_flag = 1",SELECT,false,false,,1,false,c.db.ConnRead,,ce1d96c183d201de3e8187d832495f02cd90b9eb,LOW,go2/impl.go,43
golang-sample,go2/impl.go,impl.go,code,go,69,69,GetVlsRate,"
		select Period, JPeriod, CurrencyCode, BiRateExchange
		USDRateExchange, JISDORRate, USDRateExcJisdor
		from dbo.VLSRate_TM
		where Period = ?
			","select Period, JPeriod, CurrencyCode, BiRateExchange
		USDRateExchange, JISDORRate, USDRateExcJisdor
		from dbo.VLSRate_TM
		where Period = ?",SELECT,false,false,,1,false,c.db.ConnRead,,67488d36b6c27a2efc4d4445a441820d8ebf7482,LOW,go2/impl.go,61
golang-sample,go2/impl.go,impl.go,code,go,87,88,GetVlsTransaction,"
	SELECT src,dealno
		,customer_id,acc_id
		,trx_branch,trx_date
		,trx_datetime,currency_code
		,amount,rate
		,InUSD,SourceKey
		,JISDORRate,InUSDJISDOR
		,m_pl_key,NIKAgent
		,GuidProcess,m_pl_key1
		,lcs_flag,buy_sell_code
		,product,in_usd_before
		,in_usd_total
	FROM dbo.VLSTransactions_TR
	WHERE dealno IN (?)
","SELECT src,dealno
		,customer_id,acc_id
		,trx_branch,trx_date
		,trx_datetime,currency_code
		,amount,rate
		,InUSD,SourceKey
		,JISDORRate,InUSDJISDOR
		,m_pl_key,NIKAgent
		,GuidProcess,m_pl_key1
		,lcs_flag,buy_sell_code
		,product,in_usd_before
		,in_usd_total
	FROM dbo.VLSTransactions_TR
	WHERE dealno IN (?)",SELECT,false,false,,1,false,c.db.ConnRead,,d4f170294f1cef0ff54a9695c6e8b7750e1926bf,LOW,go2/golang/go2/query.go,20
golang-sample,go2/impl.go,impl.go,code,go,97,98,GetVlsTransaction,"
	SELECT src,dealno
		,customer_id,acc_id
		,trx_branch,trx_date
		,trx_datetime,currency_code
		,amount,rate
		,InUSD,SourceKey
		,JISDORRate,InUSDJISDOR
		,m_pl_key,NIKAgent
		,GuidProcess,m_pl_key1
		,lcs_flag,buy_sell_code
		,product,in_usd_before
		,in_usd_total
	FROM dbo.VLSTransactionsToday_TR
	WHERE dealno IN (?)
","SELECT src,dealno
		,customer_id,acc_id
		,trx_branch,trx_date
		,trx_datetime,currency_code
		,amount,rate
		,InUSD,SourceKey
		,JISDORRate,InUSDJISDOR
		,m_pl_key,NIKAgent
		,GuidProcess,m_pl_key1
		,lcs_flag,buy_sell_code
		,product,in_usd_before
		,in_usd_total
	FROM dbo.VLSTransactionsToday_TR
	WHERE dealno IN (?)",SELECT,false,false,,1,false,c.db.ConnRead,,adeba31b807526db62239653c658a0ab5b60a392,LOW,go2/golang/go2/query.go,36
golang-sample,go2/query.go,query.go,code,go,3,3,,"
	SELECT TOP 1 current_working_date
	FROM dbo.control_table
","SELECT TOP 1 current_working_date
	FROM dbo.control_table",SELECT,false,false,,1,false,,,5e2e34e6c7b66a6e103a624e2b7e66e772c61c4e,LOW,go2/query.go,3
golang-sample,go2/query.go,query.go,code,go,8,8,,"
	SELECT DISTINCT TRIM(CFCOUN)
	FROM dbo.CFMAST
	WHERE (CFCIF = ?)
","SELECT DISTINCT TRIM(CFCOUN)
	FROM dbo.CFMAST
	WHERE (CFCIF = ?)",SELECT,false,false,,1,false,,,a9228bfc4e196770dce2c08013cd672b99697836,LOW,go2/query.go,8
golang-sample,go2/query.go,query.go,code,go,14,14,,"
	SELECT CurrencyCode, BIRate
	FROM dbo.SIBSCurrencyTable_TM
	WHERE (PBOId = 500)
","SELECT CurrencyCode, BIRate
	FROM dbo.SIBSCurrencyTable_TM
	WHERE (PBOId = 500)",SELECT,false,false,,1,false,,,4c3e21fd67aec85e9073cc9adcf7b2154bed6d74,LOW,go2/query.go,14
golang-sample,go2/query.go,query.go,code,go,20,20,,"
	SELECT src,dealno
		,customer_id,acc_id
		,trx_branch,trx_date
		,trx_datetime,currency_code
		,amount,rate
		,InUSD,SourceKey
		,JISDORRate,InUSDJISDOR
		,m_pl_key,NIKAgent
		,GuidProcess,m_pl_key1
		,lcs_flag,buy_sell_code
		,product,in_usd_before
		,in_usd_total
	FROM dbo.VLSTransactions_TR
	WHERE dealno IN (?)
","SELECT src,dealno
		,customer_id,acc_id
		,trx_branch,trx_date
		,trx_datetime,currency_code
		,amount,rate
		,InUSD,SourceKey
		,JISDORRate,InUSDJISDOR
		,m_pl_key,NIKAgent
		,GuidProcess,m_pl_key1
		,lcs_flag,buy_sell_code
		,product,in_usd_before
		,in_usd_total
	FROM dbo.VLSTransactions_TR
	WHERE dealno IN (?)",SELECT,false,false,,1,false,,,d4f170294f1cef0ff54a9695c6e8b7750e1926bf,LOW,go2/query.go,20
golang-sample,go2/query.go,query.go,code,go,36,36,,"
	SELECT src,dealno
		,customer_id,acc_id
		,trx_branch,trx_date
		,trx_datetime,currency_code
		,amount,rate
		,InUSD,SourceKey
		,JISDORRate,InUSDJISDOR
		,m_pl_key,NIKAgent
		,GuidProcess,m_pl_key1
		,lcs_flag,buy_sell_code
		,product,in_usd_before
		,in_usd_total
	FROM dbo.VLSTransactionsToday_TR
	WHERE dealno IN (?)
","SELECT src,dealno
		,customer_id,acc_id
		,trx_branch,trx_date
		,trx_datetime,currency_code
		,amount,rate
		,InUSD,SourceKey
		,JISDORRate,InUSDJISDOR
		,m_pl_key,NIKAgent
		,GuidProcess,m_pl_key1
		,lcs_flag,buy_sell_code
		,product,in_usd_before
		,in_usd_total
	FROM dbo.VLSTransactionsToday_TR
	WHERE dealno IN (?)",SELECT,false,false,,1,false,,,adeba31b807526db62239653c658a0ab5b60a392,LOW,go2/query.go,36
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,13,13,,"-- name: PopulateDataFromBancaNoAAUITMAndBancaNoAAUITM :many
select aj.NIK, aj.Nama, aj.JobTitle, aj.AAJI, aj.DateExpire, au.AAUI, au.DateExpire, aj.DateUpload, aj.NIKUpload 
from BancaNoAAJI_TM aj
left join BancaNoAAUI_TM au
on aj.NIK = au.NIK
WHERE  aj.NIK = @p1 OR @p2 IN ('D')
		and 
		(
			(aj.DateUpload  >= convert(varchar,@p3,112) 
				and aj.DateUpload < dateadd(dd,1,@p4)  )
			OR @p2 IN ('N') 
		)
UNION ALL
select au.NIK, au.Nama, au.JobTitle, aj.AAJI, aj.DateExpire, au.AAUI, au.DateExpire, au.DateUpload, au.NIKUpload 
from BancaNoAAUI_TM au
left join BancaNoAAJI_TM aj
on aj.NIK = au.NIK
where aj.NIK is null
	AND  au.NIK = @p1 OR @p2 IN ('D')
		and 
		(
			(au.DateUpload  >= convert(varchar,@p3,112) 
				and au.DateUpload < dateadd(dd,1,@p4)  )
			OR @p2 IN ('N') 
		)
","select aj.NIK, aj.Nama, aj.JobTitle, aj.AAJI, aj.DateExpire, au.AAUI, au.DateExpire, aj.DateUpload, aj.NIKUpload 
from BancaNoAAJI_TM aj
left join BancaNoAAUI_TM au
on aj.NIK = au.NIK
WHERE  aj.NIK = @p1 OR @p2 IN ('D')
		and 
		(
			(aj.DateUpload  >= convert(varchar,@p3,112) 
				and aj.DateUpload < dateadd(dd,1,@p4)  )
			OR @p2 IN ('N') 
		)
UNION ALL
select au.NIK, au.Nama, au.JobTitle, aj.AAJI, aj.DateExpire, au.AAUI, au.DateExpire, au.DateUpload, au.NIKUpload 
from BancaNoAAUI_TM au
left join BancaNoAAJI_TM aj
on aj.NIK = au.NIK
where aj.NIK is null
	AND  au.NIK = @p1 OR @p2 IN ('D')
		and 
		(
			(au.DateUpload  >= convert(varchar,@p3,112) 
				and au.DateUpload < dateadd(dd,1,@p4)  )
			OR @p2 IN ('N') 
		)",SELECT,false,false,,2,false,,,ed6f6b30f5e3fa33792f6e74777324b3a497ec21,LOW,go3/aajiQueries.sql.go,13
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,60,65,PopulateDataFromBancaNoAAUITMAndBancaNoAAUITM,"-- name: PopulateDataFromBancaNoAAUITMAndBancaNoAAUITM :many
select aj.NIK, aj.Nama, aj.JobTitle, aj.AAJI, aj.DateExpire, au.AAUI, au.DateExpire, aj.DateUpload, aj.NIKUpload 
from BancaNoAAJI_TM aj
left join BancaNoAAUI_TM au
on aj.NIK = au.NIK
WHERE  aj.NIK = @p1 OR @p2 IN ('D')
		and 
		(
			(aj.DateUpload  >= convert(varchar,@p3,112) 
				and aj.DateUpload < dateadd(dd,1,@p4)  )
			OR @p2 IN ('N') 
		)
UNION ALL
select au.NIK, au.Nama, au.JobTitle, aj.AAJI, aj.DateExpire, au.AAUI, au.DateExpire, au.DateUpload, au.NIKUpload 
from BancaNoAAUI_TM au
left join BancaNoAAJI_TM aj
on aj.NIK = au.NIK
where aj.NIK is null
	AND  au.NIK = @p1 OR @p2 IN ('D')
		and 
		(
			(au.DateUpload  >= convert(varchar,@p3,112) 
				and au.DateUpload < dateadd(dd,1,@p4)  )
			OR @p2 IN ('N') 
		)
","select aj.NIK, aj.Nama, aj.JobTitle, aj.AAJI, aj.DateExpire, au.AAUI, au.DateExpire, aj.DateUpload, aj.NIKUpload 
from BancaNoAAJI_TM aj
left join BancaNoAAUI_TM au
on aj.NIK = au.NIK
WHERE  aj.NIK = @p1 OR @p2 IN ('D')
		and 
		(
			(aj.DateUpload  >= convert(varchar,@p3,112) 
				and aj.DateUpload < dateadd(dd,1,@p4)  )
			OR @p2 IN ('N') 
		)
UNION ALL
select au.NIK, au.Nama, au.JobTitle, aj.AAJI, aj.DateExpire, au.AAUI, au.DateExpire, au.DateUpload, au.NIKUpload 
from BancaNoAAUI_TM au
left join BancaNoAAJI_TM aj
on aj.NIK = au.NIK
where aj.NIK is null
	AND  au.NIK = @p1 OR @p2 IN ('D')
		and 
		(
			(au.DateUpload  >= convert(varchar,@p3,112) 
				and au.DateUpload < dateadd(dd,1,@p4)  )
			OR @p2 IN ('N') 
		)",SELECT,false,false,,2,false,ctx,,ed6f6b30f5e3fa33792f6e74777324b3a497ec21,LOW,go3/golang/go3/aajiQueries.sql.go,13
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,97,97,,"-- name: GetDataFromAAJITM :many
select aj.NIK, aj.Nama, aj.JobTitle, aj.AAJI, aj.DateExpire, 
(
    select top 1 au.AAUI from BancaNoAAUI_TM au where au.NIK = aj.NIK
	order by au.DateUpload desc
) as AAUI,
(
    select top 1 au.DateExpire from BancaNoAAUI_TM au where au.NIK = aj.NIK
	order by au.DateUpload desc
) as DateExpireAAUI, aj.DateUpload, aj.NIKUpload 
from BancaNoAAJI_TM aj order by NIK desc
","select aj.NIK, aj.Nama, aj.JobTitle, aj.AAJI, aj.DateExpire, 
(
    select top 1 au.AAUI from BancaNoAAUI_TM au where au.NIK = aj.NIK
	order by au.DateUpload desc
) as AAUI,
(
    select top 1 au.DateExpire from BancaNoAAUI_TM au where au.NIK = aj.NIK
	order by au.DateUpload desc
) as DateExpireAAUI, aj.DateUpload, aj.NIKUpload 
from BancaNoAAJI_TM aj order by NIK desc",SELECT,false,false,,2,false,,,982f032c438801a2a2472bb95b27fc058f073069,LOW,go3/aajiQueries.sql.go,97
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,123,123,GetDataFromAAJITM,"-- name: GetDataFromAAJITM :many
select aj.NIK, aj.Nama, aj.JobTitle, aj.AAJI, aj.DateExpire, 
(
    select top 1 au.AAUI from BancaNoAAUI_TM au where au.NIK = aj.NIK
	order by au.DateUpload desc
) as AAUI,
(
    select top 1 au.DateExpire from BancaNoAAUI_TM au where au.NIK = aj.NIK
	order by au.DateUpload desc
) as DateExpireAAUI, aj.DateUpload, aj.NIKUpload 
from BancaNoAAJI_TM aj order by NIK desc
","select aj.NIK, aj.Nama, aj.JobTitle, aj.AAJI, aj.DateExpire, 
(
    select top 1 au.AAUI from BancaNoAAUI_TM au where au.NIK = aj.NIK
	order by au.DateUpload desc
) as AAUI,
(
    select top 1 au.DateExpire from BancaNoAAUI_TM au where au.NIK = aj.NIK
	order by au.DateUpload desc
) as DateExpireAAUI, aj.DateUpload, aj.NIKUpload 
from BancaNoAAJI_TM aj order by NIK desc",SELECT,false,false,,2,false,ctx,,982f032c438801a2a2472bb95b27fc058f073069,LOW,go3/golang/go3/aajiQueries.sql.go,97
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,155,155,,"-- name: GetDataFromAAUITM :many
select au.NIK, au.Nama, au.JobTitle,
( 
    select top 1 aj.AAJI from BancaNoAAJI_TM aj where aj.NIK = au.NIK 
	order by aj.DateUpload desc
) as AAJI, 
(
    select top 1 aj.DateExpire from BancaNoAAJI_TM aj where aj.NIK = au.NIK 
	order by aj.DateUpload desc
) as DateExpireAAJI, au.AAUI, au.DateExpire, au.DateUpload, au.NIKUpload 
from BancaNoAAUI_TM au left join BancaNoAAJI_TM aj
on aj.NIK = au.NIK
where aj.NIK is null
","select au.NIK, au.Nama, au.JobTitle,
( 
    select top 1 aj.AAJI from BancaNoAAJI_TM aj where aj.NIK = au.NIK 
	order by aj.DateUpload desc
) as AAJI, 
(
    select top 1 aj.DateExpire from BancaNoAAJI_TM aj where aj.NIK = au.NIK 
	order by aj.DateUpload desc
) as DateExpireAAJI, au.AAUI, au.DateExpire, au.DateUpload, au.NIKUpload 
from BancaNoAAUI_TM au left join BancaNoAAJI_TM aj
on aj.NIK = au.NIK
where aj.NIK is null",SELECT,false,false,,2,false,,,19c8d45f263b4cff05ce871776081c4d676490ba,LOW,go3/aajiQueries.sql.go,155
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,183,183,GetDataFromAAUITM,"-- name: GetDataFromAAUITM :many
select au.NIK, au.Nama, au.JobTitle,
( 
    select top 1 aj.AAJI from BancaNoAAJI_TM aj where aj.NIK = au.NIK 
	order by aj.DateUpload desc
) as AAJI, 
(
    select top 1 aj.DateExpire from BancaNoAAJI_TM aj where aj.NIK = au.NIK 
	order by aj.DateUpload desc
) as DateExpireAAJI, au.AAUI, au.DateExpire, au.DateUpload, au.NIKUpload 
from BancaNoAAUI_TM au left join BancaNoAAJI_TM aj
on aj.NIK = au.NIK
where aj.NIK is null
","select au.NIK, au.Nama, au.JobTitle,
( 
    select top 1 aj.AAJI from BancaNoAAJI_TM aj where aj.NIK = au.NIK 
	order by aj.DateUpload desc
) as AAJI, 
(
    select top 1 aj.DateExpire from BancaNoAAJI_TM aj where aj.NIK = au.NIK 
	order by aj.DateUpload desc
) as DateExpireAAJI, au.AAUI, au.DateExpire, au.DateUpload, au.NIKUpload 
from BancaNoAAUI_TM au left join BancaNoAAJI_TM aj
on aj.NIK = au.NIK
where aj.NIK is null",SELECT,false,false,,2,false,ctx,,19c8d45f263b4cff05ce871776081c4d676490ba,LOW,go3/golang/go3/aajiQueries.sql.go,155
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,215,215,,"-- name: DeleteBatchIdFromBancaMTranAAJIAAUITT :exec
delete from BancaMTranAAJIAAUI_TT where BatchId = @p1
",delete from BancaMTranAAJIAAUI_TT where BatchId = @p1,DELETE,true,false,,2,false,,,8594b37a90090ac9fe85b2a291a6b0de2d13af73,MEDIUM,go3/aajiQueries.sql.go,215
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,220,220,DeleteBatchIdFromBancaMTranAAJIAAUITT,"-- name: DeleteBatchIdFromBancaMTranAAJIAAUITT :exec
delete from BancaMTranAAJIAAUI_TT where BatchId = @p1
",delete from BancaMTranAAJIAAUI_TT where BatchId = @p1,DELETE,true,false,,2,false,ctx,,8594b37a90090ac9fe85b2a291a6b0de2d13af73,MEDIUM,go3/golang/go3/aajiQueries.sql.go,215
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,224,224,,"-- name: CheckNIKIfNotRegisterOnPeopleSoftFromPSEmployeev :many
select EMPLID from PSEmployee_v where EMPLID = @p1
",select EMPLID from PSEmployee_v where EMPLID = @p1,SELECT,false,false,,1,false,,,4b9a303582b4b4c3d18e0003684205396626dc65,LOW,go3/aajiQueries.sql.go,224
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,229,229,CheckNIKIfNotRegisterOnPeopleSoftFromPSEmployeev,"-- name: CheckNIKIfNotRegisterOnPeopleSoftFromPSEmployeev :many
select EMPLID from PSEmployee_v where EMPLID = @p1
",select EMPLID from PSEmployee_v where EMPLID = @p1,SELECT,false,false,,1,false,ctx,,4b9a303582b4b4c3d18e0003684205396626dc65,LOW,go3/golang/go3/aajiQueries.sql.go,224
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,251,251,,"-- name: CheckNIKIsRegisterFromBancaNoAAJITM :many
SELECT NIK from BancaNoAAUI_TM where NIK = @p1
",SELECT NIK from BancaNoAAUI_TM where NIK = @p1,SELECT,false,false,,1,false,,,fd1a1930e24a57581233cced7b600fb3a7532586,LOW,go3/aajiQueries.sql.go,251
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,256,256,CheckNIKIsRegisterFromBancaNoAAJITM,"-- name: CheckNIKIsRegisterFromBancaNoAAJITM :many
SELECT NIK from BancaNoAAUI_TM where NIK = @p1
",SELECT NIK from BancaNoAAUI_TM where NIK = @p1,SELECT,false,false,,1,false,ctx,,fd1a1930e24a57581233cced7b600fb3a7532586,LOW,go3/golang/go3/aajiQueries.sql.go,251
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,278,278,,"-- name: CheckTransactionIsExistByNIKANDStatusFromBancaMTranAAJIAAUITT :many
select NIKSeller from BancaMTranAAJIAAUI_TT where NIKSeller = @p1 and Status = 0
",select NIKSeller from BancaMTranAAJIAAUI_TT where NIKSeller = @p1 and Status = 0,SELECT,false,false,,1,false,,,6a9b6cbbda4215209f8e66506e51c4599a944c83,LOW,go3/aajiQueries.sql.go,278
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,283,283,CheckTransactionIsExistByNIKANDStatusFromBancaMTranAAJIAAUITT,"-- name: CheckTransactionIsExistByNIKANDStatusFromBancaMTranAAJIAAUITT :many
select NIKSeller from BancaMTranAAJIAAUI_TT where NIKSeller = @p1 and Status = 0
",select NIKSeller from BancaMTranAAJIAAUI_TT where NIKSeller = @p1 and Status = 0,SELECT,false,false,,1,false,ctx,,6a9b6cbbda4215209f8e66506e51c4599a944c83,LOW,go3/golang/go3/aajiQueries.sql.go,278
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,305,305,,"-- name: GetAAJIFromBancaMTranAAJIAAUITTByNIKANDStatus :many
select NIKSeller from BancaMTranAAJIAAUI_TT where AAJI = @p1 and NIKSeller != @p2 and Status = 0
",select NIKSeller from BancaMTranAAJIAAUI_TT where AAJI = @p1 and NIKSeller != @p2 and Status = 0,SELECT,false,false,,1,false,,,38b49f9e9e79067f1a6393fd7ddfa549edd71110,LOW,go3/aajiQueries.sql.go,305
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,315,315,GetAAJIFromBancaMTranAAJIAAUITTByNIKANDStatus,"-- name: GetAAJIFromBancaMTranAAJIAAUITTByNIKANDStatus :many
select NIKSeller from BancaMTranAAJIAAUI_TT where AAJI = @p1 and NIKSeller != @p2 and Status = 0
",select NIKSeller from BancaMTranAAJIAAUI_TT where AAJI = @p1 and NIKSeller != @p2 and Status = 0,SELECT,false,false,,1,false,ctx,,38b49f9e9e79067f1a6393fd7ddfa549edd71110,LOW,go3/golang/go3/aajiQueries.sql.go,305
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,337,337,,"-- name: GetAAUIFromBancaMTranAAJIAAUITTByNIKANDStatus :many
select NIKSeller from BancaMTranAAJIAAUI_TT where AAUI = @p1 and NIKSeller != @p2 and Status = 0
",select NIKSeller from BancaMTranAAJIAAUI_TT where AAUI = @p1 and NIKSeller != @p2 and Status = 0,SELECT,false,false,,1,false,,,1e9fc266b76447f90ff40fafeb8833fb11a623cf,LOW,go3/aajiQueries.sql.go,337
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,347,347,GetAAUIFromBancaMTranAAJIAAUITTByNIKANDStatus,"-- name: GetAAUIFromBancaMTranAAJIAAUITTByNIKANDStatus :many
select NIKSeller from BancaMTranAAJIAAUI_TT where AAUI = @p1 and NIKSeller != @p2 and Status = 0
",select NIKSeller from BancaMTranAAJIAAUI_TT where AAUI = @p1 and NIKSeller != @p2 and Status = 0,SELECT,false,false,,1,false,ctx,,1e9fc266b76447f90ff40fafeb8833fb11a623cf,LOW,go3/golang/go3/aajiQueries.sql.go,337
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,369,369,,"-- name: GetBancaNoAAJITMByDate :many
select aj.NIK, aj.Nama, aj.JobTitle, aj.AAJI, aj.DateExpire, au.AAUI, au.DateExpire, aj.DateUpload, aj.NIKUpload from BancaNoAAJI_TM aj
left join BancaNoAAUI_TM au ON aj.NIK = au.NIK where aj.DateUpload >= @p1 and aj.DateUpload <= @p2
order by  aj.NIK
","select aj.NIK, aj.Nama, aj.JobTitle, aj.AAJI, aj.DateExpire, au.AAUI, au.DateExpire, aj.DateUpload, aj.NIKUpload from BancaNoAAJI_TM aj
left join BancaNoAAUI_TM au ON aj.NIK = au.NIK where aj.DateUpload >= @p1 and aj.DateUpload <= @p2
order by  aj.NIK",SELECT,false,false,,2,false,,,8121c8af7ca0ff58f16d025cb36b8770c85578f9,LOW,go3/aajiQueries.sql.go,369
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,393,393,GetBancaNoAAJITMByDate,"-- name: GetBancaNoAAJITMByDate :many
select aj.NIK, aj.Nama, aj.JobTitle, aj.AAJI, aj.DateExpire, au.AAUI, au.DateExpire, aj.DateUpload, aj.NIKUpload from BancaNoAAJI_TM aj
left join BancaNoAAUI_TM au ON aj.NIK = au.NIK where aj.DateUpload >= @p1 and aj.DateUpload <= @p2
order by  aj.NIK
","select aj.NIK, aj.Nama, aj.JobTitle, aj.AAJI, aj.DateExpire, au.AAUI, au.DateExpire, aj.DateUpload, aj.NIKUpload from BancaNoAAJI_TM aj
left join BancaNoAAUI_TM au ON aj.NIK = au.NIK where aj.DateUpload >= @p1 and aj.DateUpload <= @p2
order by  aj.NIK",SELECT,false,false,,2,false,ctx,,8121c8af7ca0ff58f16d025cb36b8770c85578f9,LOW,go3/golang/go3/aajiQueries.sql.go,369
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,425,425,,"-- name: GetBancaNoAAJITMByNIKDate :many
select aj.NIK, aj.Nama, aj.JobTitle, aj.AAJI, aj.DateExpire, au.AAUI, au.DateExpire, aj.DateUpload, aj.NIKUpload from BancaNoAAJI_TM aj
left join BancaNoAAUI_TM au ON aj.NIK = au.NIK where aj.DateUpload >= @p1 and aj.DateUpload <= @p2 and aj.NIK = @p3
order by aj.NIK
","select aj.NIK, aj.Nama, aj.JobTitle, aj.AAJI, aj.DateExpire, au.AAUI, au.DateExpire, aj.DateUpload, aj.NIKUpload from BancaNoAAJI_TM aj
left join BancaNoAAUI_TM au ON aj.NIK = au.NIK where aj.DateUpload >= @p1 and aj.DateUpload <= @p2 and aj.NIK = @p3
order by aj.NIK",SELECT,false,false,,2,false,,,492edaf631dd771bc526aead7ee6279d70997822,LOW,go3/aajiQueries.sql.go,425
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,450,450,GetBancaNoAAJITMByNIKDate,"-- name: GetBancaNoAAJITMByNIKDate :many
select aj.NIK, aj.Nama, aj.JobTitle, aj.AAJI, aj.DateExpire, au.AAUI, au.DateExpire, aj.DateUpload, aj.NIKUpload from BancaNoAAJI_TM aj
left join BancaNoAAUI_TM au ON aj.NIK = au.NIK where aj.DateUpload >= @p1 and aj.DateUpload <= @p2 and aj.NIK = @p3
order by aj.NIK
","select aj.NIK, aj.Nama, aj.JobTitle, aj.AAJI, aj.DateExpire, au.AAUI, au.DateExpire, aj.DateUpload, aj.NIKUpload from BancaNoAAJI_TM aj
left join BancaNoAAUI_TM au ON aj.NIK = au.NIK where aj.DateUpload >= @p1 and aj.DateUpload <= @p2 and aj.NIK = @p3
order by aj.NIK",SELECT,false,false,,2,false,ctx,,492edaf631dd771bc526aead7ee6279d70997822,LOW,go3/golang/go3/aajiQueries.sql.go,425
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,482,482,,"-- name: GetLastInsertedBatchId :one
SELECT cast(max(BatchId) as int) as BatchId FROM BancaMTranAAJIAAUI_TT
",SELECT cast(max(BatchId) as int) as BatchId FROM BancaMTranAAJIAAUI_TT,EXEC,true,false,,1,false,,,021cb023b31036c7991162b665f49770ba018d0a,MEDIUM,go3/aajiQueries.sql.go,482
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,487,487,GetLastInsertedBatchId,"-- name: GetLastInsertedBatchId :one
SELECT cast(max(BatchId) as int) as BatchId FROM BancaMTranAAJIAAUI_TT
",SELECT cast(max(BatchId) as int) as BatchId FROM BancaMTranAAJIAAUI_TT,EXEC,true,false,,1,false,ctx,,021cb023b31036c7991162b665f49770ba018d0a,MEDIUM,go3/golang/go3/aajiQueries.sql.go,482
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,493,493,,"-- name: GetNIKFromBancaNoAAJITMByAAUIANDNIK :many
select au.NIK from BancaNoAAUI_TM au where au.AAUI = @p1 and au.NIK != @p2
",select au.NIK from BancaNoAAUI_TM au where au.AAUI = @p1 and au.NIK != @p2,SELECT,false,false,,1,false,,,cf88a0ebea8bf362757fa0bc3aaf9abd546c4d4a,LOW,go3/aajiQueries.sql.go,493
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,503,503,GetNIKFromBancaNoAAJITMByAAUIANDNIK,"-- name: GetNIKFromBancaNoAAJITMByAAUIANDNIK :many
select au.NIK from BancaNoAAUI_TM au where au.AAUI = @p1 and au.NIK != @p2
",select au.NIK from BancaNoAAUI_TM au where au.AAUI = @p1 and au.NIK != @p2,SELECT,false,false,,1,false,ctx,,cf88a0ebea8bf362757fa0bc3aaf9abd546c4d4a,LOW,go3/golang/go3/aajiQueries.sql.go,493
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,525,525,,"-- name: GetNIKFromBancaNoAAUITMByAAJIANDNIK :many
select aj.NIK from BancaNoAAJI_TM aj where aj.AAJI = @p1 and aj.NIK != @p2
",select aj.NIK from BancaNoAAJI_TM aj where aj.AAJI = @p1 and aj.NIK != @p2,SELECT,false,false,,1,false,,,a6de6b7a9e8e75b86bed7c4064b9d637f5a30c5e,LOW,go3/aajiQueries.sql.go,525
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,535,535,GetNIKFromBancaNoAAUITMByAAJIANDNIK,"-- name: GetNIKFromBancaNoAAUITMByAAJIANDNIK :many
select aj.NIK from BancaNoAAJI_TM aj where aj.AAJI = @p1 and aj.NIK != @p2
",select aj.NIK from BancaNoAAJI_TM aj where aj.AAJI = @p1 and aj.NIK != @p2,SELECT,false,false,,1,false,ctx,,a6de6b7a9e8e75b86bed7c4064b9d637f5a30c5e,LOW,go3/golang/go3/aajiQueries.sql.go,525
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,557,557,,"-- name: GetNameAndJobTitleByNIK :many
select NAME, JOBTITLE from SQL_Employee.dbo.PSEmployee_v where EMPLID = @p1 AND EMPL_RCD = 0
","select NAME, JOBTITLE from SQL_Employee.dbo.PSEmployee_v where EMPLID = @p1 AND EMPL_RCD = 0",SELECT,false,true,SQL_Employee,1,false,,,f3860bd8363f4c1b31aa319f192df22b84c49621,LOW,go3/aajiQueries.sql.go,557
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,567,567,GetNameAndJobTitleByNIK,"-- name: GetNameAndJobTitleByNIK :many
select NAME, JOBTITLE from SQL_Employee.dbo.PSEmployee_v where EMPLID = @p1 AND EMPL_RCD = 0
","select NAME, JOBTITLE from SQL_Employee.dbo.PSEmployee_v where EMPLID = @p1 AND EMPL_RCD = 0",SELECT,false,true,SQL_Employee,1,false,ctx,,f3860bd8363f4c1b31aa319f192df22b84c49621,LOW,go3/golang/go3/aajiQueries.sql.go,557
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,589,589,,"-- name: InsertBancaMTranAAJIAAUITT :exec
insert into BancaMTranAAJIAAUI_TT (NIKSeller, InputDate, AAJI, AAJIExpireDate, AAUI, AAUIExpireDate, NIKInputer, Status, ActionType, DeletedXML)    
select @p1, @p2, @p3, @p4, @p5, @p6, @p7, 0, @p8, @p9
","insert into BancaMTranAAJIAAUI_TT (NIKSeller, InputDate, AAJI, AAJIExpireDate, AAUI, AAUIExpireDate, NIKInputer, Status, ActionType, DeletedXML)    
select @p1, @p2, @p3, @p4, @p5, @p6, @p7, 0, @p8, @p9",EXEC,true,false,,2,false,,,ff975a72c42e1c69f611fd9a1134dc9a49c39d4c,MEDIUM,go3/aajiQueries.sql.go,589
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,607,617,InsertBancaMTranAAJIAAUITT,"-- name: InsertBancaMTranAAJIAAUITT :exec
insert into BancaMTranAAJIAAUI_TT (NIKSeller, InputDate, AAJI, AAJIExpireDate, AAUI, AAUIExpireDate, NIKInputer, Status, ActionType, DeletedXML)    
select @p1, @p2, @p3, @p4, @p5, @p6, @p7, 0, @p8, @p9
","insert into BancaMTranAAJIAAUI_TT (NIKSeller, InputDate, AAJI, AAJIExpireDate, AAUI, AAUIExpireDate, NIKInputer, Status, ActionType, DeletedXML)    
select @p1, @p2, @p3, @p4, @p5, @p6, @p7, 0, @p8, @p9",EXEC,true,false,,2,false,ctx,,ff975a72c42e1c69f611fd9a1134dc9a49c39d4c,MEDIUM,go3/golang/go3/aajiQueries.sql.go,589
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,621,621,,"-- name: UpdateBatchCode :exec
UPDATE BancaMTranAAJIAAUI_TT
SET BatchCode = 'M' + cast (BatchId as varchar(50)) where BatchId = @p1
","UPDATE BancaMTranAAJIAAUI_TT
SET BatchCode = 'M' + cast (BatchId as varchar(50)) where BatchId = @p1",UPDATE,true,false,,1,false,,,7b5b09858b7c9ee766100f268d169bf056fd960e,MEDIUM,go3/aajiQueries.sql.go,621
golang-sample,go3/aajiQueries.sql.go,aajiQueries.sql.go,code,go,627,627,UpdateBatchCode,"-- name: UpdateBatchCode :exec
UPDATE BancaMTranAAJIAAUI_TT
SET BatchCode = 'M' + cast (BatchId as varchar(50)) where BatchId = @p1
","UPDATE BancaMTranAAJIAAUI_TT
SET BatchCode = 'M' + cast (BatchId as varchar(50)) where BatchId = @p1",UPDATE,true,false,,1,false,ctx,,7b5b09858b7c9ee766100f268d169bf056fd960e,MEDIUM,go3/golang/go3/aajiQueries.sql.go,621
golang-sample,go3/bancaQueries_manual.sql.go,bancaQueries_manual.sql.go,code,go,13,13,,"-- name: InsertDeleteTT :one
DECLARE @InsertedData TABLE (BatchId int
		, Jenis tinyint
		, UserInput int
		, UserOtor int
		, DateOtor datetime
		, StatusOtor tinyint
		, ActionType varchar(10)
		);

INSERT INTO BancaDelete_TT
	(Jenis, UserInput, StatusOtor, ActionType)
OUTPUT inserted.BatchId, inserted.Jenis
		, inserted.UserInput, inserted.UserOtor
		, inserted.DateOtor, inserted.StatusOtor 
		, inserted.ActionType
			INTO @InsertedData
VALUES(@p1, @p2, @p3, @p4)

SELECT BatchId, Jenis, UserInput
		, UserOtor, DateOtor, StatusOtor,ActionType
FROM @InsertedData;
","DECLARE @InsertedData TABLE (BatchId int
		, Jenis tinyint
		, UserInput int
		, UserOtor int
		, DateOtor datetime
		, StatusOtor tinyint
		, ActionType varchar(10)
		);

INSERT INTO BancaDelete_TT
	(Jenis, UserInput, StatusOtor, ActionType)
OUTPUT inserted.BatchId, inserted.Jenis
		, inserted.UserInput, inserted.UserOtor
		, inserted.DateOtor, inserted.StatusOtor 
		, inserted.ActionType
			INTO @InsertedData
VALUES(@p1, @p2, @p3, @p4)

SELECT BatchId, Jenis, UserInput
		, UserOtor, DateOtor, StatusOtor,ActionType
FROM @InsertedData;",INSERT,true,false,,2,false,,,08712dc65d8db891bf09f92c1b3fc008f39074a9,MEDIUM,go3/bancaQueries_manual.sql.go,13
golang-sample,go3/bancaQueries_manual.sql.go,bancaQueries_manual.sql.go,code,go,45,50,InsertDeleteTT,"-- name: InsertDeleteTT :one
DECLARE @InsertedData TABLE (BatchId int
		, Jenis tinyint
		, UserInput int
		, UserOtor int
		, DateOtor datetime
		, StatusOtor tinyint
		, ActionType varchar(10)
		);

INSERT INTO BancaDelete_TT
	(Jenis, UserInput, StatusOtor, ActionType)
OUTPUT inserted.BatchId, inserted.Jenis
		, inserted.UserInput, inserted.UserOtor
		, inserted.DateOtor, inserted.StatusOtor 
		, inserted.ActionType
			INTO @InsertedData
VALUES(@p1, @p2, @p3, @p4)

SELECT BatchId, Jenis, UserInput
		, UserOtor, DateOtor, StatusOtor,ActionType
FROM @InsertedData;
","DECLARE @InsertedData TABLE (BatchId int
		, Jenis tinyint
		, UserInput int
		, UserOtor int
		, DateOtor datetime
		, StatusOtor tinyint
		, ActionType varchar(10)
		);

INSERT INTO BancaDelete_TT
	(Jenis, UserInput, StatusOtor, ActionType)
OUTPUT inserted.BatchId, inserted.Jenis
		, inserted.UserInput, inserted.UserOtor
		, inserted.DateOtor, inserted.StatusOtor 
		, inserted.ActionType
			INTO @InsertedData
VALUES(@p1, @p2, @p3, @p4)

SELECT BatchId, Jenis, UserInput
		, UserOtor, DateOtor, StatusOtor,ActionType
FROM @InsertedData;",INSERT,true,false,,2,false,ctx,,08712dc65d8db891bf09f92c1b3fc008f39074a9,MEDIUM,go3/golang/go3/bancaQueries_manual.sql.go,13
golang-sample,go3/bancaQueries_manual.sql.go,bancaQueries_manual.sql.go,code,go,64,64,,"-- name: GetBancaControlTableTM :one
	DECLARE  @outPreviousDate			smalldatetime
			,@outCurrentDate			smalldatetime
			,@outNextDate				smalldatetime
			,@outBeginOfDay				bit
			,@outEndOfDay				bit
			,@outLastBatchId			bigint
			,@outBatchProcessBit		bit
			,@outGNCAccountNoIDR		varchar(20)
			,@outGLAccountFeeAccruedIDR	varchar(20)
			,@outGLOwnerFee				varchar(20)
			,@outOwnerBranch			int
			,@outGNCPerantaraTravelex	varchar(20)
			,@outIsAAJIMandatory		bit
			,@outIsAAUIMandatory		bit
			,@outOnOffBancaGW			bit
			,@outOnOffBMWGLOLLog		bit
			,@outGLFeeValas				varchar(20)
			,@outGLFeeValasBranch		varchar(20)

	UPDATE BancaControlTable_TM  
	SET		@outPreviousDate			= PreviousDate			
		,@outCurrentDate				= CurrentDate			
		,@outNextDate				= NextDate				
		,@outBeginOfDay				= BeginOfDay				
		,@outEndOfDay				= EndOfDay				
		,@outLastBatchId				= LastBatchId			
		,@outBatchProcessBit			= BatchProcessBit		
		,@outGNCAccountNoIDR			= GNCAccountNoIDR		
		,@outGLAccountFeeAccruedIDR	= GLAccountFeeAccruedIDR	
		,@outGLOwnerFee				= GLOwnerFee				
		,@outOwnerBranch				= OwnerBranch			
		,@outGNCPerantaraTravelex	= GNCPerantaraTravelex	
		,@outIsAAJIMandatory			= IsAAJIMandatory		
		,@outIsAAUIMandatory			= IsAAUIMandatory		
		,@outOnOffBancaGW			= OnOffBancaGW			
		,@outOnOffBMWGLOLLog			= OnOffBMWGLOLLog		
		,@outGLFeeValas				= GLFeeValas				
		,@outGLFeeValasBranch		= GLFeeValasBranch	
		,LastBatchId					= LastBatchId +1


	SELECT  @outPreviousDate			AS PreviousDate			
		,@outCurrentDate				AS CurrentDate			
		,@outNextDate				AS NextDate				
		,@outBeginOfDay				AS BeginOfDay				
		,@outEndOfDay				AS EndOfDay				
		,@outLastBatchId				AS LastBatchId			
		,@outBatchProcessBit			AS BatchProcessBit		
		,@outGNCAccountNoIDR			AS GNCAccountNoIDR		
		,@outGLAccountFeeAccruedIDR	AS GLAccountFeeAccruedIDR	
		,@outGLOwnerFee				AS GLOwnerFee				
		,@outOwnerBranch				AS OwnerBranch			
		,@outGNCPerantaraTravelex	AS GNCPerantaraTravelex	
		,@outIsAAJIMandatory			AS IsAAJIMandatory		
		,@outIsAAUIMandatory			AS IsAAUIMandatory		
		,@outOnOffBancaGW			AS OnOffBancaGW			
		,@outOnOffBMWGLOLLog			AS OnOffBMWGLOLLog		
		,@outGLFeeValas				AS GLFeeValas				
		,@outGLFeeValasBranch		AS GLFeeValasBranch	
","DECLARE  @outPreviousDate			smalldatetime
			,@outCurrentDate			smalldatetime
			,@outNextDate				smalldatetime
			,@outBeginOfDay				bit
			,@outEndOfDay				bit
			,@outLastBatchId			bigint
			,@outBatchProcessBit		bit
			,@outGNCAccountNoIDR		varchar(20)
			,@outGLAccountFeeAccruedIDR	varchar(20)
			,@outGLOwnerFee				varchar(20)
			,@outOwnerBranch			int
			,@outGNCPerantaraTravelex	varchar(20)
			,@outIsAAJIMandatory		bit
			,@outIsAAUIMandatory		bit
			,@outOnOffBancaGW			bit
			,@outOnOffBMWGLOLLog		bit
			,@outGLFeeValas				varchar(20)
			,@outGLFeeValasBranch		varchar(20)

	UPDATE BancaControlTable_TM  
	SET		@outPreviousDate			= PreviousDate			
		,@outCurrentDate				= CurrentDate			
		,@outNextDate				= NextDate				
		,@outBeginOfDay				= BeginOfDay				
		,@outEndOfDay				= EndOfDay				
		,@outLastBatchId				= LastBatchId			
		,@outBatchProcessBit			= BatchProcessBit		
		,@outGNCAccountNoIDR			= GNCAccountNoIDR		
		,@outGLAccountFeeAccruedIDR	= GLAccountFeeAccruedIDR	
		,@outGLOwnerFee				= GLOwnerFee				
		,@outOwnerBranch				= OwnerBranch			
		,@outGNCPerantaraTravelex	= GNCPerantaraTravelex	
		,@outIsAAJIMandatory			= IsAAJIMandatory		
		,@outIsAAUIMandatory			= IsAAUIMandatory		
		,@outOnOffBancaGW			= OnOffBancaGW			
		,@outOnOffBMWGLOLLog			= OnOffBMWGLOLLog		
		,@outGLFeeValas				= GLFeeValas				
		,@outGLFeeValasBranch		= GLFeeValasBranch	
		,LastBatchId					= LastBatchId +1


	SELECT  @outPreviousDate			AS PreviousDate			
		,@outCurrentDate				AS CurrentDate			
		,@outNextDate				AS NextDate				
		,@outBeginOfDay				AS BeginOfDay				
		,@outEndOfDay				AS EndOfDay				
		,@outLastBatchId				AS LastBatchId			
		,@outBatchProcessBit			AS BatchProcessBit		
		,@outGNCAccountNoIDR			AS GNCAccountNoIDR		
		,@outGLAccountFeeAccruedIDR	AS GLAccountFeeAccruedIDR	
		,@outGLOwnerFee				AS GLOwnerFee				
		,@outOwnerBranch				AS OwnerBranch			
		,@outGNCPerantaraTravelex	AS GNCPerantaraTravelex	
		,@outIsAAJIMandatory			AS IsAAJIMandatory		
		,@outIsAAUIMandatory			AS IsAAUIMandatory		
		,@outOnOffBancaGW			AS OnOffBancaGW			
		,@outOnOffBMWGLOLLog			AS OnOffBMWGLOLLog		
		,@outGLFeeValas				AS GLFeeValas				
		,@outGLFeeValasBranch		AS GLFeeValasBranch",UPDATE,true,false,,1,false,,,710083c6cef4d6e9538d3d000b8dffb0ccb6c0e7,MEDIUM,go3/bancaQueries_manual.sql.go,64
golang-sample,go3/bancaQueries_manual.sql.go,bancaQueries_manual.sql.go,code,go,127,127,GetBancaControlTableTMLastId,"-- name: GetBancaControlTableTM :one
	DECLARE  @outPreviousDate			smalldatetime
			,@outCurrentDate			smalldatetime
			,@outNextDate				smalldatetime
			,@outBeginOfDay				bit
			,@outEndOfDay				bit
			,@outLastBatchId			bigint
			,@outBatchProcessBit		bit
			,@outGNCAccountNoIDR		varchar(20)
			,@outGLAccountFeeAccruedIDR	varchar(20)
			,@outGLOwnerFee				varchar(20)
			,@outOwnerBranch			int
			,@outGNCPerantaraTravelex	varchar(20)
			,@outIsAAJIMandatory		bit
			,@outIsAAUIMandatory		bit
			,@outOnOffBancaGW			bit
			,@outOnOffBMWGLOLLog		bit
			,@outGLFeeValas				varchar(20)
			,@outGLFeeValasBranch		varchar(20)

	UPDATE BancaControlTable_TM  
	SET		@outPreviousDate			= PreviousDate			
		,@outCurrentDate				= CurrentDate			
		,@outNextDate				= NextDate				
		,@outBeginOfDay				= BeginOfDay				
		,@outEndOfDay				= EndOfDay				
		,@outLastBatchId				= LastBatchId			
		,@outBatchProcessBit			= BatchProcessBit		
		,@outGNCAccountNoIDR			= GNCAccountNoIDR		
		,@outGLAccountFeeAccruedIDR	= GLAccountFeeAccruedIDR	
		,@outGLOwnerFee				= GLOwnerFee				
		,@outOwnerBranch				= OwnerBranch			
		,@outGNCPerantaraTravelex	= GNCPerantaraTravelex	
		,@outIsAAJIMandatory			= IsAAJIMandatory		
		,@outIsAAUIMandatory			= IsAAUIMandatory		
		,@outOnOffBancaGW			= OnOffBancaGW			
		,@outOnOffBMWGLOLLog			= OnOffBMWGLOLLog		
		,@outGLFeeValas				= GLFeeValas				
		,@outGLFeeValasBranch		= GLFeeValasBranch	
		,LastBatchId					= LastBatchId +1


	SELECT  @outPreviousDate			AS PreviousDate			
		,@outCurrentDate				AS CurrentDate			
		,@outNextDate				AS NextDate				
		,@outBeginOfDay				AS BeginOfDay				
		,@outEndOfDay				AS EndOfDay				
		,@outLastBatchId				AS LastBatchId			
		,@outBatchProcessBit			AS BatchProcessBit		
		,@outGNCAccountNoIDR			AS GNCAccountNoIDR		
		,@outGLAccountFeeAccruedIDR	AS GLAccountFeeAccruedIDR	
		,@outGLOwnerFee				AS GLOwnerFee				
		,@outOwnerBranch				AS OwnerBranch			
		,@outGNCPerantaraTravelex	AS GNCPerantaraTravelex	
		,@outIsAAJIMandatory			AS IsAAJIMandatory		
		,@outIsAAUIMandatory			AS IsAAUIMandatory		
		,@outOnOffBancaGW			AS OnOffBancaGW			
		,@outOnOffBMWGLOLLog			AS OnOffBMWGLOLLog		
		,@outGLFeeValas				AS GLFeeValas				
		,@outGLFeeValasBranch		AS GLFeeValasBranch	
","DECLARE  @outPreviousDate			smalldatetime
			,@outCurrentDate			smalldatetime
			,@outNextDate				smalldatetime
			,@outBeginOfDay				bit
			,@outEndOfDay				bit
			,@outLastBatchId			bigint
			,@outBatchProcessBit		bit
			,@outGNCAccountNoIDR		varchar(20)
			,@outGLAccountFeeAccruedIDR	varchar(20)
			,@outGLOwnerFee				varchar(20)
			,@outOwnerBranch			int
			,@outGNCPerantaraTravelex	varchar(20)
			,@outIsAAJIMandatory		bit
			,@outIsAAUIMandatory		bit
			,@outOnOffBancaGW			bit
			,@outOnOffBMWGLOLLog		bit
			,@outGLFeeValas				varchar(20)
			,@outGLFeeValasBranch		varchar(20)

	UPDATE BancaControlTable_TM  
	SET		@outPreviousDate			= PreviousDate			
		,@outCurrentDate				= CurrentDate			
		,@outNextDate				= NextDate				
		,@outBeginOfDay				= BeginOfDay				
		,@outEndOfDay				= EndOfDay				
		,@outLastBatchId				= LastBatchId			
		,@outBatchProcessBit			= BatchProcessBit		
		,@outGNCAccountNoIDR			= GNCAccountNoIDR		
		,@outGLAccountFeeAccruedIDR	= GLAccountFeeAccruedIDR	
		,@outGLOwnerFee				= GLOwnerFee				
		,@outOwnerBranch				= OwnerBranch			
		,@outGNCPerantaraTravelex	= GNCPerantaraTravelex	
		,@outIsAAJIMandatory			= IsAAJIMandatory		
		,@outIsAAUIMandatory			= IsAAUIMandatory		
		,@outOnOffBancaGW			= OnOffBancaGW			
		,@outOnOffBMWGLOLLog			= OnOffBMWGLOLLog		
		,@outGLFeeValas				= GLFeeValas				
		,@outGLFeeValasBranch		= GLFeeValasBranch	
		,LastBatchId					= LastBatchId +1


	SELECT  @outPreviousDate			AS PreviousDate			
		,@outCurrentDate				AS CurrentDate			
		,@outNextDate				AS NextDate				
		,@outBeginOfDay				AS BeginOfDay				
		,@outEndOfDay				AS EndOfDay				
		,@outLastBatchId				AS LastBatchId			
		,@outBatchProcessBit			AS BatchProcessBit		
		,@outGNCAccountNoIDR			AS GNCAccountNoIDR		
		,@outGLAccountFeeAccruedIDR	AS GLAccountFeeAccruedIDR	
		,@outGLOwnerFee				AS GLOwnerFee				
		,@outOwnerBranch				AS OwnerBranch			
		,@outGNCPerantaraTravelex	AS GNCPerantaraTravelex	
		,@outIsAAJIMandatory			AS IsAAJIMandatory		
		,@outIsAAUIMandatory			AS IsAAUIMandatory		
		,@outOnOffBancaGW			AS OnOffBancaGW			
		,@outOnOffBMWGLOLLog			AS OnOffBMWGLOLLog		
		,@outGLFeeValas				AS GLFeeValas				
		,@outGLFeeValasBranch		AS GLFeeValasBranch",UPDATE,true,false,,1,false,ctx,,710083c6cef4d6e9538d3d000b8dffb0ccb6c0e7,MEDIUM,go3/golang/go3/bancaQueries_manual.sql.go,64
golang-sample,go3/bond_transaction_repository.go,bond_transaction_repository.go,code,go,38,38,GetSecondaryTransactionStatus,"SELECT Id,Description FROM dbo.SecurityTransactionStatus_TM ORDER BY Id","SELECT Id,Description FROM dbo.SecurityTransactionStatus_TM ORDER BY Id",SELECT,false,false,,1,false,r.db_trs,,48e5c14ee1ef990fff05a5723c1ba03146a0cba1,LOW,go3/bond_transaction_repository.go,37
golang-sample,go3/bond_transaction_repository.go,bond_transaction_repository.go,code,go,636,636,GetSecondaryTransactionBlotter,"
	DECLARE
		@pdFrom DATETIME  
		,@pdTo 	DATETIME  

	SET @pdFrom = DATEADD(dd,DATEDIFF(dd,0,@pdTrxFrom),0)    
  	SET @pdTo = DATEADD(DAY,1,@pdTrxTo)            

	  CREATE TABLE #tmp_blotter (  
		[DealId]				BIGINT  
		,[SecurityAcctNo]		VARCHAR(20)  
		,[TransactionType]		VARCHAR(50)  
		,[ProductName]			VARCHAR(100)  
		,[TipeBenefit]			VARCHAR(50)  
		,[Name]					VARCHAR(100)  
		,[BranchTransaksi]		VARCHAR(150)  
		,[Currency]				VARCHAR(10)  
		,[FaceValue]			VARCHAR(30)  
		,[nFaceValue]			DECIMAL(20,5)  
		,[DealPrice]			DECIMAL(20,5)  
		,[AccruedInterest]		VARCHAR(30)  
		,[TotalProceed]			VARCHAR(30)  
		,SumberDana				VARCHAR(500)  
		,[TanggalTransaksi]		DATETIME  
		,[SettlementDate]		DATETIME  
		,[DealNoMurex]			VARCHAR(100)  
		,[Status]				VARCHAR(100)  
		,[Instruksi]			VARCHAR(100)    
		,[Switching]			VARCHAR(100)    
		,IdLelang				VARCHAR(50)  
		,MurexNoKemenkeu		VARCHAR(20)  
		,MurexNoTrader			VARCHAR(20)  
		,[ReplaceIdLelang]		VARCHAR(1000)  
		,HargaModal				VARCHAR(40)  
		,nHargaModal			DECIMAL(20,5)  
		,NIKInputter			VARCHAR(150)  
		,NIKNamaInputter		VARCHAR(150)  
		,NIKSeller				VARCHAR(150)  
		,NIKNamaSeller			VARCHAR(150)  
		,NIKMarketing			VARCHAR(150)  
		,NIKNamaMarketing		VARCHAR(150)  
        ,PBEACustomerId			VARCHAR(13)       
        ,FlagOther				BIT
        ,NoRekInestor			VARCHAR(40)
		,RevenueInIDR			DECIMAL(20,5)
		,TrxType				INT
		,SecId					BIGINT
        ,Kurs					DECIMAL(13,7)     
        ,BondType				VARCHAR(10)       
		,TrxStatus				VARCHAR(10)
	)  

	CREATE TABLE #tmp_SOF (  
		DealIdProduct			BIGINT
		,Product				VARCHAR(50)
		,SourceData				VARCHAR(50)  
		,DealIdSource			BIGINT
		,Account				VARCHAR(50)  
	)
   
	/*** TRX SEKUNDER ***/  
	INSERT #tmp_blotter (  
		[DealId]     
		,[SecurityAcctNo]   
		,[TransactionType]   
		,[ProductName]  
		,[TipeBenefit]
		,[Name]      
		,[BranchTransaksi]   
		,[Currency]
		,[FaceValue]    
		,[nFaceValue]
		,[DealPrice]    
		,[AccruedInterest]   
		,[TotalProceed]  
		,[TanggalTransaksi]  
		,[SettlementDate]      
		,[DealNoMurex]   
		,[Status]     
		,[Instruksi]    
		,[Switching]  
		,HargaModal  
		,nHargaModal  
		,NIKInputter
		,NIKSeller
		,PBEACustomerId
		,FlagOther
		,NoRekInestor
		,TrxType
		,SecId
		,TrxStatus
	)  
	SELECT   
		sttt.DealId   
		,tctm.SecAccNo  
		,sctr.TrxDesc  
		,sm.SecDescr  
		,par.Description
		,tctm.Nama  
		,sttt.TrxBranch + '-' + mie.office_name
		,sm.SecCcy
		,CONVERT(VARCHAR(30),sttt.FaceValue,1)  
		,sttt.FaceValue
		,sttt.DealPrice  
		,CONVERT(VARCHAR(30),sttt.AccruedInterest,1)  
		,CONVERT(VARCHAR(30),sttt.TotalProceed,1)  
		,sttt.TrxDate  
		,sttt.SettlementDate  
		,ISNULL(sttt.DealIdExternal,'-')  
		,ISNULL(sts.[Description],'-')  
		,CASE WHEN sttt.Instruction = 'OM'   
		THEN 'OneMobile'    
		WHEN sttt.Instruction = 'VELO' THEN 'VELOCITY' 
		ELSE CASE WHEN sttt.PhoneOrderBit = 1   
			THEN 'Phone Order'  
			ELSE 'Cabang'  
			END  
		END  
		,CASE sttt.FlagSwitching   
			WHEN 1 THEN sttt.DealIdSwitching  
			ELSE '' 
		END  AS Switching  
		,CONVERT(VARCHAR(30),sttt.HargaModal, 1) AS HargaModal    
		,sttt.HargaModal
		,sttt.NIK_Dealer
		,sttt.NIK_CS
        ,RIGHT(tctm.CIFNo, 13) AS PBEACustomerId       
		,sttt.FlagOther
		,sttt.NoRekInvestor
		,sttt.TrxType
		,sttt.SecId
		,sttt.TrxStatus
	FROM dbo.SecurityTransaction_TT sttt   WITH(NOLOCK)
	INNER JOIN dbo.TreasuryCustomer_TM tctm WITH(NOLOCK)   
		ON sttt.CIFId = tctm.CIFId      
	LEFT JOIN dbo.SecurityTransactionStatus_TM sts WITH(NOLOCK) 
		ON sttt.TrxStatus = sts.Id      
	LEFT JOIN dbo.MISOfficeInformationEODFull_v mie WITH(NOLOCK) 
		ON sttt.TrxBranch = mie.office_id      
	LEFT JOIN dbo.SecurityMaster_TM sm WITH(NOLOCK)    
		ON sttt.SecId = sm.SecId    
	LEFT JOIN dbo.SecurityTransaction_TR sctr WITH(NOLOCK)  
		ON sttt.TrxType = sctr.TrxTypeID
	LEFT JOIN dbo.TRSParameter_TR par
		ON sm.ImbalHasil = par.Value
			AND par.Code = 'ImbalHasil'
	WHERE (@pnStatus = -1 or sttt.TrxStatus = @pnStatus)  
		AND (CASE WHEN sttt.TrxType = 5 THEN sttt.SettlementDate ELSE sttt.TrxDate END) >= @pdFrom  
		AND (CASE WHEN sttt.TrxType = 5 THEN sttt.SettlementDate ELSE sttt.TrxDate END) < @pdTo
		AND TrxType not in (11)    
		AND ISNULL([IsBuyBack], 0) = 0  
		AND ISNULL([IsLelang], 0) = 0  
		AND @pcTrxType <> 'Lelang'

	UPDATE tmp  
	SET tmp.[Instruksi] = 'RM Mobile'  
	FROM #tmp_blotter tmp  
	JOIN dbo.RMMSecurityTransaction_TT rmm  
		ON tmp.[DealId] = rmm.DealId  
	WHERE tmp.[Instruksi] = 'Cabang'  
  
	/*** TRX LElANG ***/  
	INSERT #tmp_blotter (  
		IdLelang  
		,[SecurityAcctNo]   
		,[TransactionType]   
		,[ProductName]    
		,[TipeBenefit]
		,[Name]      
		,[BranchTransaksi]   
		,[Currency]
		,[FaceValue]    
		,[nFaceValue]    
		,[DealPrice]    
		,[AccruedInterest]   
		,[TotalProceed]  
		,[TanggalTransaksi]  
		,[SettlementDate]      
		,[DealNoMurex]   
		,[Status]     
		,[Instruksi]      
		,HargaModal  
		,nHargaModal  
		,NIKInputter
		,NIKSeller
		,PBEACustomerId
		,FlagOther
		,NoRekInestor
		,TrxType
		,SecId
		,TrxStatus
	)  
	SELECT   
		CONVERT(VARCHAR(50), stl.IdLelang)
		,tctm.SecAccNo  
		,'Sell'  
		,sm.SecDescr  
		,par.Description
		,tctm.Nama  
		,stl.TrxBranch + '-' + mie.office_name  
		,sm.SecCcy
		,CONVERT(VARCHAR(30),ISNULL(sttt.FaceValue,stl.FaceValue),1)  
		,ISNULL(sttt.FaceValue,stl.FaceValue)  
		,ISNULL(sttt.DealPrice,stl.DealPrice)  
		,CONVERT(VARCHAR(30),ISNULL(sttt.AccruedInterest,stl.AccruedInterest),1)  
		,CONVERT(VARCHAR(30),ISNULL(sttt.TotalProceed,stl.TotalProceed),1)  
		,ISNULL(sttt.TrxDate,stl.TrxDate)  
		,stl.SettlementDate  
		,ISNULL(sttt.DealIdExternal,'-')  
		,ISNULL(sts.ParamDesc,'-')  
		,'Cabang'  
		,CONVERT(VARCHAR(30),stl.HargaModal, 1) AS HargaModal  
		,stl.HargaModal
		,stl.NIK_Dealer
		,stl.NIK_CS
        ,RIGHT(tctm.CIFNo, 13) AS PBEACustomerId       
		,stl.FlagOther
		,stl.NoRekInvestor
		,4
		,stl.SecId
		,stl.[Status]
	FROM dbo.SecurityTrxLelang_TT stl  WITH(NOLOCK)    
	INNER JOIN dbo.TreasuryCustomer_TM tctm WITH(NOLOCK) 
		ON stl.CIFId = tctm.CIFId      
	LEFT JOIN dbo.SecurityParamLelang_TR sts WITH(NOLOCK) 
		ON stl.[Status] = sts.ParamValue      
	LEFT JOIN dbo.MISOfficeInformationEODFull_v mie WITH(NOLOCK) 
		ON stl.TrxBranch = mie.office_id      
	LEFT JOIN dbo.SecurityMaster_TM sm WITH(NOLOCK) 
		ON stl.SecId = sm.SecId  
	LEFT JOIN dbo.SecurityTransaction_TT sttt WITH(NOLOCK) 
		ON stl.IdLelang = sttt.IdLelang  
			AND sttt.TrxDate >= @pdFrom 
			AND sttt.TrxDate < @pdTo  
	LEFT JOIN dbo.TRSParameter_TR par
		ON sm.ImbalHasil = par.Value
			AND par.Code = 'ImbalHasil'
	WHERE ((sttt.TrxDate IS NULL AND stl.TrxDate >= @pdFrom) OR sttt.TrxDate >= @pdFrom)  
		AND ((sttt.TrxDate IS NULL AND stl.TrxDate < @pdTo) OR sttt.TrxDate < @pdTo)  
		AND @pcTrxType <> 'Sekunder'
    
	IF @pcTrxType = 'Lelang' AND @pnStatus >= 0
	BEGIN  
		DELETE bl  
		FROM #tmp_blotter bl WITH(NOLOCK)  
		LEFT JOIN dbo.SecurityTransaction_TT stt WITH(NOLOCK)  
			ON bl.IdLelang = stt.IdLelang  
				AND stt.TrxDate >= @pdFrom  
				AND stt.TrxDate < @pdTo  
				AND stt.TrxStatus = @pnStatus  
		WHERE bl.[TransactionType] = 'Sell'  
			AND stt.IdLelang IS NULL  
	END  
   
	UPDATE bl  
	SET [DealId] = tt.DealId  
		,[Status] = sts.[Description]  
	FROM #tmp_blotter bl  
	JOIN dbo.SecurityTransaction_TT tt   
		ON bl.IdLelang = tt.IdLelang  
	JOIN dbo.SecurityTransactionStatus_TM sts  
		ON tt.TrxStatus = sts.Id      
	WHERE bl.[TransactionType] = 'Sell'  
		AND tt.IsLelang = 1  
		AND tt.TrxDate >= DATEADD(day,-7,@pdFrom)  
		AND tt.TrxDate < DATEADD(day,7,@pdTo)  
      
	UPDATE bl  
	SET MurexNoKemenkeu = tr.MurexNoKemenkeu  
		,MurexNoTrader = tr.MurexNoTrader  
	FROM #tmp_blotter bl  
	JOIN dbo.[SecurityTrxResultLelang_TT] tt  
		ON bl.IdLelang = tt.IdLelang  
	JOIN dbo.SecurityTrxLelang_TT trx  
		ON trx.IdLelang = tt.IdLelang  
	JOIN dbo.SecurityBatchResult_TR tr  
		ON tt.ResultId = tr.ResultId  
			AND tt.Instruction = tr.BatchType  
	WHERE trx.[Status] = 'EXC'  
    
	UPDATE bl  
	SET MurexNoKemenkeu = tr.MurexNoKemenkeu  
		,MurexNoTrader = tr.MurexNoTrader  
	FROM #tmp_blotter bl  
	JOIN SecurityReplaceTrxLelang_TT rep  
		ON bl.IdLelang = rep.IdLelang  
	JOIN dbo.[SecurityTrxResultLelang_TT] tt  
		ON rep.IdLelang_Source = tt.IdLelang  
	JOIN dbo.SecurityBatchResult_TR tr  
		ON tt.ResultId = tr.ResultId  
			AND tt.Instruction = tr.BatchType  
	WHERE tt.StatusData = 'EXC'  
    
	IF EXISTS(SELECT TOP 1 1 FROM #tmp_blotter a  
		JOIN dbo.SecurityReplaceTrxLelang_TT b WITH(NOLOCK)  
			ON b.IdLelang_Source = a.IdLelang  
		WHERE b.IdLelang IS NOT NULL AND @pcTrxType <> 'Sekunder'  
	)  
	BEGIN  
		UPDATE a  
		SET [ReplaceIdLelang] = STUFF(          
			(  
				SELECT DISTINCT ',' + CAST(IdLelang AS VARCHAR(19))  
				FROM dbo.SecurityReplaceTrxLelang_TT  WITH(NOLOCK)        
				WHERE IdLelang_Source = a.IdLelang  
			FOR XML PATH ('')  
			), 1, 1, ''  
			)  
		FROM #tmp_blotter a  
		WHERE a.IdLelang IS NOT NULL  
     
		UPDATE a  
		SET [ReplaceIdLelang] = [ReplaceIdLelang] + ' - ' +CONVERT(VARCHAR(15),c.InsertedDate,106)  
		FROM #tmp_blotter a  
		JOIN dbo.SecurityReplaceTrxLelang_TT b WITH(NOLOCK)  
			ON b.IdLelang_Source = a.IdLelang  
		JOIN dbo.SecurityTrxLelang_TT c WITH(NOLOCK)  
			ON b.IdLelang = c.IdLelang  
		WHERE a.IdLelang IS NOT NULL  
	END 

    --- NamaInputter ---       
    UPDATE tmp       
        SET NIKNamaInputter = RTRIM(tmp.NIKInputter) + '-' + RTRIM(u.fullname)
    FROM #tmp_blotter tmp       
    INNER JOIN dbo.user_nisp_v u       
        ON tmp.NIKInputter = u.nik 

	--- NamaSeller ---       
	UPDATE tmp       
		SET NIKNamaSeller = RTRIM(tmp.NIKSeller) + '-' + RTRIM(u.fullname)
	FROM #tmp_blotter tmp       
	INNER JOIN dbo.user_nisp_v u       
		ON tmp.NIKSeller = u.nik   

    --- EA Customer NIKMarketingFlagging ---       
    UPDATE tmp       
        SET NIKMarketing = ea.MOId       
    FROM #tmp_blotter tmp       
    INNER JOIN dbo.EACustomerFlagging_TM_v ea       
        ON tmp.PBEACustomerId = ea.CustomerId       
          
    --- NIKMarketingFlagging & IsPremierBanking ---          
    UPDATE tmp       
        SET NIKMarketing = pb.UserId       
    FROM #tmp_blotter tmp       
    INNER JOIN dbo.PBCustomerFlagging_TM_v pb       
        ON tmp.PBEACustomerId = pb.CustomerId 

    --- NameMarketingFlagging ---        
	UPDATE tmp       
        SET NIKNamaMarketing = RTRIM(tmp.NIKMarketing) + '-' + RTRIM(u.fullname)
    FROM #tmp_blotter tmp       
    INNER JOIN dbo.user_nisp_v u       
        ON tmp.NIKMarketing = u.nik 
	
	--- Sumber Dana ---        
	INSERT #tmp_SOF(  
		DealIdProduct
		,Product
		,SourceData
		,DealIdSource
		,Account
	)
	SELECT 
		DealIdProduct
		,Product
		,SourceData
		,DealIdSource
		,Account
	FROM #tmp_blotter tmp
	JOIN dbo.TRSListTransactionSourceOfFund_TT tt
		ON RTRIM(tt.Product) IN ('Obligasi', 'Lelang')
			AND tmp.DealId = tt.DealIdProduct
	WHERE TrxStatus NOT IN ('11')

	INSERT #tmp_SOF(  
		DealIdProduct
		,Product
		,SourceData
		,DealIdSource
		,Account
	)
	SELECT 
		DealIdProduct
		,Product
		,SourceData
		,DealIdSource
		,Account
	FROM #tmp_blotter tmp
	JOIN dbo.TRSListTransactionSourceOfFund_TH tt
		ON RTRIM(tt.Product) IN ('Obligasi', 'Lelang')
			AND tmp.DealId = tt.DealIdProduct
	WHERE TrxStatus IN ('11')
		AND [Description] = 'DELETE DATA'

	INSERT #tmp_SOF(  
		DealIdProduct
		,Product
		,SourceData
		,DealIdSource
		,Account
	)
	SELECT 
		DealIdParent
		,'Obligasi'
		,'Obligasi'
		,DealIdChild
		,0
	FROM #tmp_blotter tmp
	JOIN dbo.SecurityTransactionLink_TR tr
		ON tmp.DealId = tr.DealIdParent
	WHERE TrxStatus NOT IN ('11')

	INSERT #tmp_SOF(  
		DealIdProduct
		,Product
		,SourceData
		,DealIdSource
		,Account
	)
	SELECT 
		DealIdParent
		,'Obligasi'
		,'Obligasi'
		,DealIdChild
		,0
	FROM #tmp_blotter tmp
	JOIN dbo.SecurityTranscationLink_TL tr
		ON tmp.DealId = tr.DealIdParent
	WHERE TrxStatus IN ('11')

	SELECT DISTINCT sof2.DealIdProduct, 
		SUBSTRING(
			(
				SELECT 
					CASE sof1.SourceData 
					WHEN 'Rekening' THEN ', ' + 'Rekening-[' + CONVERT(VARCHAR(100), sof1.Account) + ']'
					ELSE ',' + sof1.SourceData + '-[' + CONVERT(VARCHAR(100), sof1.DealIdSource) + ']' END AS [text()]
				FROM #tmp_SOF sof1
				WHERE sof1.DealIdProduct = sof2.DealIdProduct
				ORDER BY sof1.DealIdProduct
				FOR XML PATH (''), TYPE
			).value('text()[1]	','NVARCHAR(max)'), 2, 1000) AS SumberDana
	INTO #tmpSumberDana
	FROM #tmp_SOF sof2

	UPDATE blt
		SET SumberDana = sd.SumberDana
	FROM #tmp_blotter blt
	JOIN #tmpSumberDana sd
		ON blt.DealId = sd.DealIdProduct

	UPDATE blt
		SET SumberDana = 'Rekening-[' + CONVERT(VARCHAR(100), NoRekInestor) + ']' 
	FROM #tmp_blotter blt
	WHERE ISNULL(SumberDana, '') = ''
	AND TransactionType != 'Buy'
	
	DELETE tmp FROM #tmp_blotter tmp
	WHERE @pcBenefitType != 'ALL' AND (ISNULL(TipeBenefit, '') = '' OR TipeBenefit != @pcBenefitType)

	DELETE tmp FROM #tmp_blotter tmp WHERE RTRIM(TransactionType) IN ('Bond Due', 'Coupon')

	UPDATE tmp     
	SET Kurs = sct.BIRate     
	FROM #tmp_blotter tmp     
	INNER JOIN dbo.SIBSCurrencyTable_TM_v sct     
		ON tmp.Currency = sct.CurrencyCode     
	WHERE sct.PBOId = '500'    
		AND CONVERT(VARCHAR, tmp.TanggalTransaksi, 112) >= CONVERT(VARCHAR, GETDATE(), 112)    
		AND CONVERT(VARCHAR, tmp.TanggalTransaksi, 112) < DATEADD(DAY, 1, DATEADD(DAY, DATEDIFF(DAY,0,GETDATE()), 0))    
     
	UPDATE tmp    
	SET tmp.Kurs =  ISNULL(sc.BIRate, 1)    
	FROM #tmp_blotter AS tmp    
	JOIN SQL_SIBS.dbo.SIBSCurrencyTable_EOD AS sc    
		ON CONVERT(VARCHAR, tmp.TanggalTransaksi, 112) = sc.Period    
			AND sc.CurrencyCode = tmp.Currency    
	WHERE tmp.Currency <> 'IDR' and sc.PBOId = 500    
		AND tmp.TanggalTransaksi < CONVERT(VARCHAR, GETDATE(), 112)    
		AND tmp.Kurs IS NULL    
  
	UPDATE #tmp_blotter    
		SET Kurs = 1    
	WHERE Currency = 'IDR'     
	
	UPDATE tmp
		SET RevenueInIDR = hr.ProfitLCY
    FROM #tmp_blotter tmp
	JOIN dbo.TRSHasilRevenue_TM AS hr
		ON tmp.DealId = hr.DealId

    UPDATE tmp       
		SET RevenueInIDR = 	CASE 
			WHEN Currency  = 'IDR' THEN convert( DECIMAL(20,5), CASE
				WHEN tmp.TrxType = 4 THEN ( ISNULL(tmp.DealPrice,0)  - ISNULL(tmp.nHargaModal,0)) * tmp.nFaceValue
				WHEN tmp.TrxType = 3 THEN ( ISNULL(tmp.nHargaModal,0) - ISNULL(tmp.DealPrice,0)) * tmp.nFaceValue
				ELSE 0
				END) / 100.00 
			ELSE (convert( DECIMAL(20,5), CASE 
				WHEN tmp.TrxType = 4 THEN ( ISNULL(tmp.DealPrice,0)  - ISNULL(tmp.nHargaModal,0)) * tmp.nFaceValue     
				WHEN tmp.TrxType = 3 THEN ( ISNULL(tmp.nHargaModal,0) - ISNULL(tmp.DealPrice,0)) * tmp.nFaceValue     
				ELSE 0     
				END) / 100.00 ) * Kurs     
			END   
    FROM #tmp_blotter tmp     
    WHERE RevenueInIDR IS NULL

	UPDATE tmp
		SET BondType = CASE
				WHEN sm.IsCorporateBond = 0 AND sm.SecType != 3 THEN 'GOV'
				WHEN sm.IsCorporateBond = 0 AND sm.SecType = 3 THEN 'SRBI'
				ELSE 'CORP'
			END
	FROM #tmp_blotter tmp
	JOIN dbo.SecurityMaster_TM sm WITH(NOLOCK) 
		ON tmp.SecId = sm.SecId  


	/*** RESULT ***/  
	SELECT   
		[DealId]     
		,IdLelang  
		,[SecurityAcctNo]   
		,[TransactionType]   
		,[ProductName]    
		,[TipeBenefit]
		,[Name]      
		,[BranchTransaksi]   
		,[Currency]
		,[FaceValue]    
		,HargaModal  
		,[DealPrice]    
		,[AccruedInterest]   
		,[TotalProceed]  
		,SumberDana
		,[TanggalTransaksi]  
		,[SettlementDate]      
		,[DealNoMurex]   
		,[Status]     
		,[Instruksi]      
		,[ReplaceIdLelang]
		,MurexNoKemenkeu   
		,MurexNoTrader   
		,NIKNamaInputter
		,NIKNamaSeller
		,NIKNamaMarketing
		,CONVERT(VARCHAR(30),CONVERT(MONEY,RevenueInIDR),1) AS RevenueInIDR
		,BondType
	FROM #tmp_blotter 
  
	IF OBJECT_ID('tempdb..#tmp_blotter') IS NOT NULL  
		DROP TABLE #tmp_blotter     
	
	IF OBJECT_ID('tempdb..#tmp_SOF') IS NOT NULL  
		DROP TABLE #tmp_SOF

	IF OBJECT_ID('tempdb..#tmpSumberDana') IS NOT NULL  
		DROP TABLE #tmpSumberDana
	","DECLARE
		@pdFrom DATETIME  
		,@pdTo 	DATETIME  

	SET @pdFrom = DATEADD(dd,DATEDIFF(dd,0,@pdTrxFrom),0)    
  	SET @pdTo = DATEADD(DAY,1,@pdTrxTo)            

	  CREATE TABLE #tmp_blotter (  
		[DealId]				BIGINT  
		,[SecurityAcctNo]		VARCHAR(20)  
		,[TransactionType]		VARCHAR(50)  
		,[ProductName]			VARCHAR(100)  
		,[TipeBenefit]			VARCHAR(50)  
		,[Name]					VARCHAR(100)  
		,[BranchTransaksi]		VARCHAR(150)  
		,[Currency]				VARCHAR(10)  
		,[FaceValue]			VARCHAR(30)  
		,[nFaceValue]			DECIMAL(20,5)  
		,[DealPrice]			DECIMAL(20,5)  
		,[AccruedInterest]		VARCHAR(30)  
		,[TotalProceed]			VARCHAR(30)  
		,SumberDana				VARCHAR(500)  
		,[TanggalTransaksi]		DATETIME  
		,[SettlementDate]		DATETIME  
		,[DealNoMurex]			VARCHAR(100)  
		,[Status]				VARCHAR(100)  
		,[Instruksi]			VARCHAR(100)    
		,[Switching]			VARCHAR(100)    
		,IdLelang				VARCHAR(50)  
		,MurexNoKemenkeu		VARCHAR(20)  
		,MurexNoTrader			VARCHAR(20)  
		,[ReplaceIdLelang]		VARCHAR(1000)  
		,HargaModal				VARCHAR(40)  
		,nHargaModal			DECIMAL(20,5)  
		,NIKInputter			VARCHAR(150)  
		,NIKNamaInputter		VARCHAR(150)  
		,NIKSeller				VARCHAR(150)  
		,NIKNamaSeller			VARCHAR(150)  
		,NIKMarketing			VARCHAR(150)  
		,NIKNamaMarketing		VARCHAR(150)  
        ,PBEACustomerId			VARCHAR(13)       
        ,FlagOther				BIT
        ,NoRekInestor			VARCHAR(40)
		,RevenueInIDR			DECIMAL(20,5)
		,TrxType				INT
		,SecId					BIGINT
        ,Kurs					DECIMAL(13,7)     
        ,BondType				VARCHAR(10)       
		,TrxStatus				VARCHAR(10)
	)  

	CREATE TABLE #tmp_SOF (  
		DealIdProduct			BIGINT
		,Product				VARCHAR(50)
		,SourceData				VARCHAR(50)  
		,DealIdSource			BIGINT
		,Account				VARCHAR(50)  
	)
   
	  
	INSERT #tmp_blotter (  
		[DealId]     
		,[SecurityAcctNo]   
		,[TransactionType]   
		,[ProductName]  
		,[TipeBenefit]
		,[Name]      
		,[BranchTransaksi]   
		,[Currency]
		,[FaceValue]    
		,[nFaceValue]
		,[DealPrice]    
		,[AccruedInterest]   
		,[TotalProceed]  
		,[TanggalTransaksi]  
		,[SettlementDate]      
		,[DealNoMurex]   
		,[Status]     
		,[Instruksi]    
		,[Switching]  
		,HargaModal  
		,nHargaModal  
		,NIKInputter
		,NIKSeller
		,PBEACustomerId
		,FlagOther
		,NoRekInestor
		,TrxType
		,SecId
		,TrxStatus
	)  
	SELECT   
		sttt.DealId   
		,tctm.SecAccNo  
		,sctr.TrxDesc  
		,sm.SecDescr  
		,par.Description
		,tctm.Nama  
		,sttt.TrxBranch + '-' + mie.office_name
		,sm.SecCcy
		,CONVERT(VARCHAR(30),sttt.FaceValue,1)  
		,sttt.FaceValue
		,sttt.DealPrice  
		,CONVERT(VARCHAR(30),sttt.AccruedInterest,1)  
		,CONVERT(VARCHAR(30),sttt.TotalProceed,1)  
		,sttt.TrxDate  
		,sttt.SettlementDate  
		,ISNULL(sttt.DealIdExternal,'-')  
		,ISNULL(sts.[Description],'-')  
		,CASE WHEN sttt.Instruction = 'OM'   
		THEN 'OneMobile'    
		WHEN sttt.Instruction = 'VELO' THEN 'VELOCITY' 
		ELSE CASE WHEN sttt.PhoneOrderBit = 1   
			THEN 'Phone Order'  
			ELSE 'Cabang'  
			END  
		END  
		,CASE sttt.FlagSwitching   
			WHEN 1 THEN sttt.DealIdSwitching  
			ELSE '' 
		END  AS Switching  
		,CONVERT(VARCHAR(30),sttt.HargaModal, 1) AS HargaModal    
		,sttt.HargaModal
		,sttt.NIK_Dealer
		,sttt.NIK_CS
        ,RIGHT(tctm.CIFNo, 13) AS PBEACustomerId       
		,sttt.FlagOther
		,sttt.NoRekInvestor
		,sttt.TrxType
		,sttt.SecId
		,sttt.TrxStatus
	FROM dbo.SecurityTransaction_TT sttt   WITH(NOLOCK)
	INNER JOIN dbo.TreasuryCustomer_TM tctm WITH(NOLOCK)   
		ON sttt.CIFId = tctm.CIFId      
	LEFT JOIN dbo.SecurityTransactionStatus_TM sts WITH(NOLOCK) 
		ON sttt.TrxStatus = sts.Id      
	LEFT JOIN dbo.MISOfficeInformationEODFull_v mie WITH(NOLOCK) 
		ON sttt.TrxBranch = mie.office_id      
	LEFT JOIN dbo.SecurityMaster_TM sm WITH(NOLOCK)    
		ON sttt.SecId = sm.SecId    
	LEFT JOIN dbo.SecurityTransaction_TR sctr WITH(NOLOCK)  
		ON sttt.TrxType = sctr.TrxTypeID
	LEFT JOIN dbo.TRSParameter_TR par
		ON sm.ImbalHasil = par.Value
			AND par.Code = 'ImbalHasil'
	WHERE (@pnStatus = -1 or sttt.TrxStatus = @pnStatus)  
		AND (CASE WHEN sttt.TrxType = 5 THEN sttt.SettlementDate ELSE sttt.TrxDate END) >= @pdFrom  
		AND (CASE WHEN sttt.TrxType = 5 THEN sttt.SettlementDate ELSE sttt.TrxDate END) < @pdTo
		AND TrxType not in (11)    
		AND ISNULL([IsBuyBack], 0) = 0  
		AND ISNULL([IsLelang], 0) = 0  
		AND @pcTrxType <> 'Lelang'

	UPDATE tmp  
	SET tmp.[Instruksi] = 'RM Mobile'  
	FROM #tmp_blotter tmp  
	JOIN dbo.RMMSecurityTransaction_TT rmm  
		ON tmp.[DealId] = rmm.DealId  
	WHERE tmp.[Instruksi] = 'Cabang'  
  
	  
	INSERT #tmp_blotter (  
		IdLelang  
		,[SecurityAcctNo]   
		,[TransactionType]   
		,[ProductName]    
		,[TipeBenefit]
		,[Name]      
		,[BranchTransaksi]   
		,[Currency]
		,[FaceValue]    
		,[nFaceValue]    
		,[DealPrice]    
		,[AccruedInterest]   
		,[TotalProceed]  
		,[TanggalTransaksi]  
		,[SettlementDate]      
		,[DealNoMurex]   
		,[Status]     
		,[Instruksi]      
		,HargaModal  
		,nHargaModal  
		,NIKInputter
		,NIKSeller
		,PBEACustomerId
		,FlagOther
		,NoRekInestor
		,TrxType
		,SecId
		,TrxStatus
	)  
	SELECT   
		CONVERT(VARCHAR(50), stl.IdLelang)
		,tctm.SecAccNo  
		,'Sell'  
		,sm.SecDescr  
		,par.Description
		,tctm.Nama  
		,stl.TrxBranch + '-' + mie.office_name  
		,sm.SecCcy
		,CONVERT(VARCHAR(30),ISNULL(sttt.FaceValue,stl.FaceValue),1)  
		,ISNULL(sttt.FaceValue,stl.FaceValue)  
		,ISNULL(sttt.DealPrice,stl.DealPrice)  
		,CONVERT(VARCHAR(30),ISNULL(sttt.AccruedInterest,stl.AccruedInterest),1)  
		,CONVERT(VARCHAR(30),ISNULL(sttt.TotalProceed,stl.TotalProceed),1)  
		,ISNULL(sttt.TrxDate,stl.TrxDate)  
		,stl.SettlementDate  
		,ISNULL(sttt.DealIdExternal,'-')  
		,ISNULL(sts.ParamDesc,'-')  
		,'Cabang'  
		,CONVERT(VARCHAR(30),stl.HargaModal, 1) AS HargaModal  
		,stl.HargaModal
		,stl.NIK_Dealer
		,stl.NIK_CS
        ,RIGHT(tctm.CIFNo, 13) AS PBEACustomerId       
		,stl.FlagOther
		,stl.NoRekInvestor
		,4
		,stl.SecId
		,stl.[Status]
	FROM dbo.SecurityTrxLelang_TT stl  WITH(NOLOCK)    
	INNER JOIN dbo.TreasuryCustomer_TM tctm WITH(NOLOCK) 
		ON stl.CIFId = tctm.CIFId      
	LEFT JOIN dbo.SecurityParamLelang_TR sts WITH(NOLOCK) 
		ON stl.[Status] = sts.ParamValue      
	LEFT JOIN dbo.MISOfficeInformationEODFull_v mie WITH(NOLOCK) 
		ON stl.TrxBranch = mie.office_id      
	LEFT JOIN dbo.SecurityMaster_TM sm WITH(NOLOCK) 
		ON stl.SecId = sm.SecId  
	LEFT JOIN dbo.SecurityTransaction_TT sttt WITH(NOLOCK) 
		ON stl.IdLelang = sttt.IdLelang  
			AND sttt.TrxDate >= @pdFrom 
			AND sttt.TrxDate < @pdTo  
	LEFT JOIN dbo.TRSParameter_TR par
		ON sm.ImbalHasil = par.Value
			AND par.Code = 'ImbalHasil'
	WHERE ((sttt.TrxDate IS NULL AND stl.TrxDate >= @pdFrom) OR sttt.TrxDate >= @pdFrom)  
		AND ((sttt.TrxDate IS NULL AND stl.TrxDate < @pdTo) OR sttt.TrxDate < @pdTo)  
		AND @pcTrxType <> 'Sekunder'
    
	IF @pcTrxType = 'Lelang' AND @pnStatus >= 0
	BEGIN  
		DELETE bl  
		FROM #tmp_blotter bl WITH(NOLOCK)  
		LEFT JOIN dbo.SecurityTransaction_TT stt WITH(NOLOCK)  
			ON bl.IdLelang = stt.IdLelang  
				AND stt.TrxDate >= @pdFrom  
				AND stt.TrxDate < @pdTo  
				AND stt.TrxStatus = @pnStatus  
		WHERE bl.[TransactionType] = 'Sell'  
			AND stt.IdLelang IS NULL  
	END  
   
	UPDATE bl  
	SET [DealId] = tt.DealId  
		,[Status] = sts.[Description]  
	FROM #tmp_blotter bl  
	JOIN dbo.SecurityTransaction_TT tt   
		ON bl.IdLelang = tt.IdLelang  
	JOIN dbo.SecurityTransactionStatus_TM sts  
		ON tt.TrxStatus = sts.Id      
	WHERE bl.[TransactionType] = 'Sell'  
		AND tt.IsLelang = 1  
		AND tt.TrxDate >= DATEADD(day,-7,@pdFrom)  
		AND tt.TrxDate < DATEADD(day,7,@pdTo)  
      
	UPDATE bl  
	SET MurexNoKemenkeu = tr.MurexNoKemenkeu  
		,MurexNoTrader = tr.MurexNoTrader  
	FROM #tmp_blotter bl  
	JOIN dbo.[SecurityTrxResultLelang_TT] tt  
		ON bl.IdLelang = tt.IdLelang  
	JOIN dbo.SecurityTrxLelang_TT trx  
		ON trx.IdLelang = tt.IdLelang  
	JOIN dbo.SecurityBatchResult_TR tr  
		ON tt.ResultId = tr.ResultId  
			AND tt.Instruction = tr.BatchType  
	WHERE trx.[Status] = 'EXC'  
    
	UPDATE bl  
	SET MurexNoKemenkeu = tr.MurexNoKemenkeu  
		,MurexNoTrader = tr.MurexNoTrader  
	FROM #tmp_blotter bl  
	JOIN SecurityReplaceTrxLelang_TT rep  
		ON bl.IdLelang = rep.IdLelang  
	JOIN dbo.[SecurityTrxResultLelang_TT] tt  
		ON rep.IdLelang_Source = tt.IdLelang  
	JOIN dbo.SecurityBatchResult_TR tr  
		ON tt.ResultId = tr.ResultId  
			AND tt.Instruction = tr.BatchType  
	WHERE tt.StatusData = 'EXC'  
    
	IF EXISTS(SELECT TOP 1 1 FROM #tmp_blotter a  
		JOIN dbo.SecurityReplaceTrxLelang_TT b WITH(NOLOCK)  
			ON b.IdLelang_Source = a.IdLelang  
		WHERE b.IdLelang IS NOT NULL AND @pcTrxType <> 'Sekunder'  
	)  
	BEGIN  
		UPDATE a  
		SET [ReplaceIdLelang] = STUFF(          
			(  
				SELECT DISTINCT ',' + CAST(IdLelang AS VARCHAR(19))  
				FROM dbo.SecurityReplaceTrxLelang_TT  WITH(NOLOCK)        
				WHERE IdLelang_Source = a.IdLelang  
			FOR XML PATH ('')  
			), 1, 1, ''  
			)  
		FROM #tmp_blotter a  
		WHERE a.IdLelang IS NOT NULL  
     
		UPDATE a  
		SET [ReplaceIdLelang] = [ReplaceIdLelang] + ' - ' +CONVERT(VARCHAR(15),c.InsertedDate,106)  
		FROM #tmp_blotter a  
		JOIN dbo.SecurityReplaceTrxLelang_TT b WITH(NOLOCK)  
			ON b.IdLelang_Source = a.IdLelang  
		JOIN dbo.SecurityTrxLelang_TT c WITH(NOLOCK)  
			ON b.IdLelang = c.IdLelang  
		WHERE a.IdLelang IS NOT NULL  
	END 

    
    UPDATE tmp       
        SET NIKNamaInputter = RTRIM(tmp.NIKInputter) + '-' + RTRIM(u.fullname)
    FROM #tmp_blotter tmp       
    INNER JOIN dbo.user_nisp_v u       
        ON tmp.NIKInputter = u.nik 

	
	UPDATE tmp       
		SET NIKNamaSeller = RTRIM(tmp.NIKSeller) + '-' + RTRIM(u.fullname)
	FROM #tmp_blotter tmp       
	INNER JOIN dbo.user_nisp_v u       
		ON tmp.NIKSeller = u.nik   

    
    UPDATE tmp       
        SET NIKMarketing = ea.MOId       
    FROM #tmp_blotter tmp       
    INNER JOIN dbo.EACustomerFlagging_TM_v ea       
        ON tmp.PBEACustomerId = ea.CustomerId       
          
    
    UPDATE tmp       
        SET NIKMarketing = pb.UserId       
    FROM #tmp_blotter tmp       
    INNER JOIN dbo.PBCustomerFlagging_TM_v pb       
        ON tmp.PBEACustomerId = pb.CustomerId 

    
	UPDATE tmp       
        SET NIKNamaMarketing = RTRIM(tmp.NIKMarketing) + '-' + RTRIM(u.fullname)
    FROM #tmp_blotter tmp       
    INNER JOIN dbo.user_nisp_v u       
        ON tmp.NIKMarketing = u.nik 
	
	
	INSERT #tmp_SOF(  
		DealIdProduct
		,Product
		,SourceData
		,DealIdSource
		,Account
	)
	SELECT 
		DealIdProduct
		,Product
		,SourceData
		,DealIdSource
		,Account
	FROM #tmp_blotter tmp
	JOIN dbo.TRSListTransactionSourceOfFund_TT tt
		ON RTRIM(tt.Product) IN ('Obligasi', 'Lelang')
			AND tmp.DealId = tt.DealIdProduct
	WHERE TrxStatus NOT IN ('11')

	INSERT #tmp_SOF(  
		DealIdProduct
		,Product
		,SourceData
		,DealIdSource
		,Account
	)
	SELECT 
		DealIdProduct
		,Product
		,SourceData
		,DealIdSource
		,Account
	FROM #tmp_blotter tmp
	JOIN dbo.TRSListTransactionSourceOfFund_TH tt
		ON RTRIM(tt.Product) IN ('Obligasi', 'Lelang')
			AND tmp.DealId = tt.DealIdProduct
	WHERE TrxStatus IN ('11')
		AND [Description] = 'DELETE DATA'

	INSERT #tmp_SOF(  
		DealIdProduct
		,Product
		,SourceData
		,DealIdSource
		,Account
	)
	SELECT 
		DealIdParent
		,'Obligasi'
		,'Obligasi'
		,DealIdChild
		,0
	FROM #tmp_blotter tmp
	JOIN dbo.SecurityTransactionLink_TR tr
		ON tmp.DealId = tr.DealIdParent
	WHERE TrxStatus NOT IN ('11')

	INSERT #tmp_SOF(  
		DealIdProduct
		,Product
		,SourceData
		,DealIdSource
		,Account
	)
	SELECT 
		DealIdParent
		,'Obligasi'
		,'Obligasi'
		,DealIdChild
		,0
	FROM #tmp_blotter tmp
	JOIN dbo.SecurityTranscationLink_TL tr
		ON tmp.DealId = tr.DealIdParent
	WHERE TrxStatus IN ('11')

	SELECT DISTINCT sof2.DealIdProduct, 
		SUBSTRING(
			(
				SELECT 
					CASE sof1.SourceData 
					WHEN 'Rekening' THEN ', ' + 'Rekening-[' + CONVERT(VARCHAR(100), sof1.Account) + ']'
					ELSE ',' + sof1.SourceData + '-[' + CONVERT(VARCHAR(100), sof1.DealIdSource) + ']' END AS [text()]
				FROM #tmp_SOF sof1
				WHERE sof1.DealIdProduct = sof2.DealIdProduct
				ORDER BY sof1.DealIdProduct
				FOR XML PATH (''), TYPE
			).value('text()[1]	','NVARCHAR(max)'), 2, 1000) AS SumberDana
	INTO #tmpSumberDana
	FROM #tmp_SOF sof2

	UPDATE blt
		SET SumberDana = sd.SumberDana
	FROM #tmp_blotter blt
	JOIN #tmpSumberDana sd
		ON blt.DealId = sd.DealIdProduct

	UPDATE blt
		SET SumberDana = 'Rekening-[' + CONVERT(VARCHAR(100), NoRekInestor) + ']' 
	FROM #tmp_blotter blt
	WHERE ISNULL(SumberDana, '') = ''
	AND TransactionType != 'Buy'
	
	DELETE tmp FROM #tmp_blotter tmp
	WHERE @pcBenefitType != 'ALL' AND (ISNULL(TipeBenefit, '') = '' OR TipeBenefit != @pcBenefitType)

	DELETE tmp FROM #tmp_blotter tmp WHERE RTRIM(TransactionType) IN ('Bond Due', 'Coupon')

	UPDATE tmp     
	SET Kurs = sct.BIRate     
	FROM #tmp_blotter tmp     
	INNER JOIN dbo.SIBSCurrencyTable_TM_v sct     
		ON tmp.Currency = sct.CurrencyCode     
	WHERE sct.PBOId = '500'    
		AND CONVERT(VARCHAR, tmp.TanggalTransaksi, 112) >= CONVERT(VARCHAR, GETDATE(), 112)    
		AND CONVERT(VARCHAR, tmp.TanggalTransaksi, 112) < DATEADD(DAY, 1, DATEADD(DAY, DATEDIFF(DAY,0,GETDATE()), 0))    
     
	UPDATE tmp    
	SET tmp.Kurs =  ISNULL(sc.BIRate, 1)    
	FROM #tmp_blotter AS tmp    
	JOIN SQL_SIBS.dbo.SIBSCurrencyTable_EOD AS sc    
		ON CONVERT(VARCHAR, tmp.TanggalTransaksi, 112) = sc.Period    
			AND sc.CurrencyCode = tmp.Currency    
	WHERE tmp.Currency <> 'IDR' and sc.PBOId = 500    
		AND tmp.TanggalTransaksi < CONVERT(VARCHAR, GETDATE(), 112)    
		AND tmp.Kurs IS NULL    
  
	UPDATE #tmp_blotter    
		SET Kurs = 1    
	WHERE Currency = 'IDR'     
	
	UPDATE tmp
		SET RevenueInIDR = hr.ProfitLCY
    FROM #tmp_blotter tmp
	JOIN dbo.TRSHasilRevenue_TM AS hr
		ON tmp.DealId = hr.DealId

    UPDATE tmp       
		SET RevenueInIDR = 	CASE 
			WHEN Currency  = 'IDR' THEN convert( DECIMAL(20,5), CASE
				WHEN tmp.TrxType = 4 THEN ( ISNULL(tmp.DealPrice,0)  - ISNULL(tmp.nHargaModal,0)) * tmp.nFaceValue
				WHEN tmp.TrxType = 3 THEN ( ISNULL(tmp.nHargaModal,0) - ISNULL(tmp.DealPrice,0)) * tmp.nFaceValue
				ELSE 0
				END) / 100.00 
			ELSE (convert( DECIMAL(20,5), CASE 
				WHEN tmp.TrxType = 4 THEN ( ISNULL(tmp.DealPrice,0)  - ISNULL(tmp.nHargaModal,0)) * tmp.nFaceValue     
				WHEN tmp.TrxType = 3 THEN ( ISNULL(tmp.nHargaModal,0) - ISNULL(tmp.DealPrice,0)) * tmp.nFaceValue     
				ELSE 0     
				END) / 100.00 ) * Kurs     
			END   
    FROM #tmp_blotter tmp     
    WHERE RevenueInIDR IS NULL

	UPDATE tmp
		SET BondType = CASE
				WHEN sm.IsCorporateBond = 0 AND sm.SecType != 3 THEN 'GOV'
				WHEN sm.IsCorporateBond = 0 AND sm.SecType = 3 THEN 'SRBI'
				ELSE 'CORP'
			END
	FROM #tmp_blotter tmp
	JOIN dbo.SecurityMaster_TM sm WITH(NOLOCK) 
		ON tmp.SecId = sm.SecId  


	  
	SELECT   
		[DealId]     
		,IdLelang  
		,[SecurityAcctNo]   
		,[TransactionType]   
		,[ProductName]    
		,[TipeBenefit]
		,[Name]      
		,[BranchTransaksi]   
		,[Currency]
		,[FaceValue]    
		,HargaModal  
		,[DealPrice]    
		,[AccruedInterest]   
		,[TotalProceed]  
		,SumberDana
		,[TanggalTransaksi]  
		,[SettlementDate]      
		,[DealNoMurex]   
		,[Status]     
		,[Instruksi]      
		,[ReplaceIdLelang]
		,MurexNoKemenkeu   
		,MurexNoTrader   
		,NIKNamaInputter
		,NIKNamaSeller
		,NIKNamaMarketing
		,CONVERT(VARCHAR(30),CONVERT(MONEY,RevenueInIDR),1) AS RevenueInIDR
		,BondType
	FROM #tmp_blotter 
  
	IF OBJECT_ID('tempdb..#tmp_blotter') IS NOT NULL  
		DROP TABLE #tmp_blotter     
	
	IF OBJECT_ID('tempdb..#tmp_SOF') IS NOT NULL  
		DROP TABLE #tmp_SOF

	IF OBJECT_ID('tempdb..#tmpSumberDana') IS NOT NULL  
		DROP TABLE #tmpSumberDana",INSERT,true,true,SQL_SIBS,32,false,r.db_trs,,44ff9378fdf69b713d4b5873b3d5d00f93521632,HIGH,go3/bond_transaction_repository.go,67
golang-sample,go3/refundBillingQueries_manual.sql.go,refundBillingQueries_manual.sql.go,code,go,12,12,,"-- name: ExecBASelectRefundBilling :many
exec BA_SelectRefundBilling @p1
",exec BA_SelectRefundBilling @p1,EXEC,true,false,,1,false,,,09e3f5e7c70f4edd069a225b1172391461671c3f,MEDIUM,go3/refundBillingQueries_manual.sql.go,12
golang-sample,go3/refundBillingQueries_manual.sql.go,refundBillingQueries_manual.sql.go,code,go,46,46,ExecBASelectRefundBilling,"-- name: ExecBASelectRefundBilling :many
exec BA_SelectRefundBilling @p1
",exec BA_SelectRefundBilling @p1,EXEC,true,false,,1,false,ctx,,09e3f5e7c70f4edd069a225b1172391461671c3f,MEDIUM,go3/golang/go3/refundBillingQueries_manual.sql.go,12
